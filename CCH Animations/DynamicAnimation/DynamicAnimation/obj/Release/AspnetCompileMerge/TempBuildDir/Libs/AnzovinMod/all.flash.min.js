/*! Utilities.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.Utilities=function(){throw"cannot instantiate anzovinmod.Utilities"};anzovinmod.Utilities.CreateJSObjects={};anzovinmod.Utilities.CreateJSObjects.MovieClip={defaultInstance:(typeof createjs!=="undefined"?new createjs.MovieClip():null),nonObjectAttributes:["tweenjs_count","_off","_anzovinmod"]};anzovinmod.Utilities.CreateJSObjects.Container={defaultInstance:(typeof createjs!=="undefined"?new createjs.Container():null),nonObjectAttributes:["tweenjs_count","_off","_anzovinmod"]};anzovinmod.Utilities.listChildDisplayObjectProperties=function(d){d=anzovinmod.Utilities.defaultParam(d,null);var b=[];if(d==null){return b}var a=null;if(typeof createjs!=="undefined"&&d instanceof createjs.MovieClip){a=anzovinmod.Utilities.CreateJSObjects.MovieClip}else{if(typeof createjs!=="undefined"&&d instanceof createjs.Container){a=anzovinmod.Utilities.CreateJSObjects.Container}}if(a!=null){for(var c in d){if(!d.hasOwnProperty(c)){continue}if(a.defaultInstance.hasOwnProperty(c)){continue}if(c in a.defaultInstance){continue}if(a.nonObjectAttributes.indexOf(c)!=-1){continue}if(typeof d[c]==="function"){continue}b.push(c)}}return b};anzovinmod.Utilities.bind=function(b,a){return function(){a.apply(b,arguments)}};anzovinmod.Utilities.defaultParam=function(a,c,b){if(b!==true){return(typeof(a)=="undefined"?c:a)}else{return(typeof(a)=="undefined"?c:(a===null?c:a))}};anzovinmod.Utilities.cloneArray=function(d,b,e){b=anzovinmod.Utilities.defaultParam(b,false,true);e=anzovinmod.Utilities.defaultParam(e,null);if(d instanceof Array){var c=[];var a=d.length;if(e!=null){if(e>=0&&e<=d.length){a=e}}if(b){while(a--){c[a]=anzovinmod.Utilities.cloneObject(d[a],b)}}else{while(a--){c[a]=d[a]}}return c}return null};anzovinmod.Utilities.cloneObject=function(d,a){a=anzovinmod.Utilities.defaultParam(a,false,true);if(d==null){return d}if(d instanceof Array){return anzovinmod.Utilities.cloneArray(d,a)}if(d instanceof Object){var b={};if(a){for(var c in d){if(!d.hasOwnProperty(c)){continue}b[c]=anzovinmod.Utilities.cloneObject(d[c],a)}}else{for(var c in d){if(!d.hasOwnProperty(c)){continue}b[c]=d[c]}}return b}return d};anzovinmod.Utilities.pnt=function(a,b){b=anzovinmod.Utilities.defaultParam(b,5);if(b==0){return"..."}if(typeof(a)==="undefined"){return"UNDEFINED"}else{if(a===null){return"NULL"}else{if(a instanceof Array){var d="[";for(var c=0;c<a.length;++c){if(c!=0){d+=","}d+=anzovinmod.Utilities.pnt(a[c],b-1)}d+="]";return d}else{if(a instanceof Object&&typeof(a)=="object"){if(!(a&&a.constructor&&a.constructor.name&&a.constructor.name=="Object")){return a.toString()}var d=(a&&a.constructor?a.constructor.name:"");if(d==null||d==""){d="unknown"}d+="{";var e=0;for(var c in a){if(!a.hasOwnProperty(c)){continue}if(e!=0){d+=","}d+=c+":"+anzovinmod.Utilities.pnt(a[c],b-1);++e}d+="}";return d}}}}return a.toString()};anzovinmod.Utilities.cssTransformMatrix2D=function(a){return"matrix("+a.a+","+a.b+","+a.c+","+a.d+","+a.tx+"px,"+a.ty+"px)"};anzovinmod.Utilities.getWindowSize=function(){var a={visibility:document.body.style.visibility,overflow:document.body.style.overflow};document.body.style.visibility="hidden";document.body.style.overflow="hidden";var b={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};document.body.style.visibility=a.visibility;document.body.style.overflow=a.overflow;return b};anzovinmod.Utilities.simplifyPotentialResizeValues=function(m,b,o){m=anzovinmod.Utilities.defaultParam(m,null);b=anzovinmod.Utilities.defaultParam(b,null);o=anzovinmod.Utilities.defaultParam(o,null);if(m==null||b==null||o==null){return null}if(b=="window"||o=="window"){var l=anzovinmod.Utilities.getWindowSize();if(b=="window"){b=l.width}if(o=="window"){o=l.height}}var a=false;var k=false;if(typeof(b)=="string"&&b.substr(b.length-1,1)=="%"){a=true}if(typeof(o)=="string"&&o.substr(o.length-1,1)=="%"){k=true}if(a||k){var f=[];for(var e=0;e<m.children.length;++e){var c=m.children[e];if(c&&c.style&&c.style.display){f.push({i:e,d:c.style.display});c.style.display="none !important"}}var n=m.clientWidth;var g=m.clientHeight;for(var e=0;e<f.length;++e){var d=f[e];m.children[d.i].style.display=d.d}if(a){var h=parseFloat(b);if(isNaN(h)){h=100}b=n*h/100}if(k){var h=parseFloat(o);if(isNaN(h)){h=100}o=g*h/100}}return{width:b,height:o}};anzovinmod.Utilities.calculateBoundScale=function(b,h,e,d,f){b=anzovinmod.Utilities.defaultParam(b,null);h=anzovinmod.Utilities.defaultParam(h,null);e=anzovinmod.Utilities.defaultParam(e,null);d=anzovinmod.Utilities.defaultParam(d,null);f=anzovinmod.Utilities.defaultParam(f,{},true);if(b==null||h==null||e==null||d==null){return 0}if(!f.hasOwnProperty("canScaleUp")){f.canScaleUp=true}if(!f.hasOwnProperty("canScaleDown")){f.canScaleDown=true}if(e==0||d==0){return 0}var g=b/e;var c=h/d;var a=(c>g?g:c);if(!f.canScaleUp&&a>1){a=1}if(!f.canScaleDown&&a<1){a=1}return a};anzovinmod.Utilities.removeStringComponent=function(e,b,a){e=anzovinmod.Utilities.defaultParam(e,"",true);b=anzovinmod.Utilities.defaultParam(b,"",true);a=anzovinmod.Utilities.defaultParam(a," ",true);if(e==""){return""}if(b==""){return e}var d=e.split(a);for(var c=0;c<d.length;++c){if(d[c]==b){d.splice(c,1);--c}}return d.join(a)};anzovinmod.Utilities.addStringComponent=function(e,b,a){e=anzovinmod.Utilities.defaultParam(e,"",true);b=anzovinmod.Utilities.defaultParam(b,"",true);a=anzovinmod.Utilities.defaultParam(a," ",true);if(b==""){return e}var d=e.split(a);for(var c=0;c<d.length;++c){if(d[c]==b){return e}}d.push(b);return d.join(a)};anzovinmod.Utilities.hasStringComponent=function(e,b,a){e=anzovinmod.Utilities.defaultParam(e,"",true);b=anzovinmod.Utilities.defaultParam(b,"",true);a=anzovinmod.Utilities.defaultParam(a," ",true);if(e==""||b==""){return false}var d=e.split(a);for(var c=0;c<d.length;++c){if(d[c]==b){return true}}return false};anzovinmod.Utilities.setDomElementProperty=function(c,a,f){c=anzovinmod.Utilities.defaultParam(c,null);a=anzovinmod.Utilities.defaultParam(a,null);if(c==null||a==null){return}if(!anzovinmod.Utilities.IsIE8()){c[a]=f;return}var e=anzovinmod.Utilities._DomElementProperties;for(var b=0;b<e.length;++b){if(e[b]["elem"]==c){e[b]["props"][a]=f;return}}var d={elem:c,props:{}};d.props[a]=f;e.push(d)};anzovinmod.Utilities.getDomElementProperty=function(c,a){c=anzovinmod.Utilities.defaultParam(c,null);a=anzovinmod.Utilities.defaultParam(a,null);if(c==null||a==null){return}if(!anzovinmod.Utilities.IsIE8()){return c[a]}var d=anzovinmod.Utilities._DomElementProperties;for(var b=0;b<d.length;++b){if(d[b]["elem"]==c){return d[b]["props"][a]}}return};anzovinmod.Utilities.clearDomElementProperties=function(b){b=anzovinmod.Utilities.defaultParam(b,null);if(b==null){return}if(!anzovinmod.Utilities.IsIE8()){return}var c=anzovinmod.Utilities._DomElementProperties;for(var a=0;a<c.length;++a){if(c[a]["elem"]==b){c.splice(a,1);return}}};anzovinmod.Utilities._DomElementProperties=[];anzovinmod.Utilities.IsIE8=function(){return anzovinmod&&anzovinmod.instance&&anzovinmod.instance.IsIE8};anzovinmod.Utilities.IsIE9=function(){return anzovinmod&&anzovinmod.instance&&anzovinmod.instance.IsIE9}}());
/*! Logging.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.Logging=function(){throw"cannot instantiate anzovinmod.Logging"};anzovinmod.Logging._LogLevel=4;anzovinmod.Logging.LOG_ERROR=0;anzovinmod.Logging.LOG_WARN=1;anzovinmod.Logging.LOG_NOTICE=2;anzovinmod.Logging.LOG_INFO=3;anzovinmod.Logging.LOG_DEBUG=4;anzovinmod.Logging.LOG_TRACE=5;anzovinmod.Logging.LOG_TRACE_1=5;anzovinmod.Logging.LOG_TRACE_2=6;anzovinmod.Logging.LOG_TRACE_3=7;anzovinmod.Logging.LOG_TRACE_4=8;anzovinmod.Logging.LOG_TRACE_5=9;anzovinmod.Logging.LOG_TRACE_6=10;anzovinmod.Logging.LOG_TRACE_7=11;anzovinmod.Logging.LOG_TRACE_8=12;anzovinmod.Logging.LOG_TRACE_9=13;anzovinmod.Logging.MAX_LOG_LEVEL=13;anzovinmod.Logging.canLog=function(a){return !(a>anzovinmod.Logging._LogLevel)};anzovinmod.Logging._getLogLevelString=function(a){if(typeof(a)!="number"){a=-1}if(a>anzovinmod.Logging.MAX_LOG_LEVEL){a=-1}if(a<0){a=-1}a=parseInt(a);switch(a){case -1:return"INVALID--- ";case anzovinmod.Logging.LOG_ERROR:return"error----- ";case anzovinmod.Logging.LOG_WARN:return"-warn----- ";case anzovinmod.Logging.LOG_NOTICE:return"--notice-- ";case anzovinmod.Logging.LOG_INFO:return"---info--- ";case anzovinmod.Logging.LOG_DEBUG:return"----debug- ";default:return"-----trace "}return"INVALID--- "};anzovinmod.Logging.logit=function(b){if(arguments.length<=1){return false}if(typeof console==="undefined"){return false}if(b>anzovinmod.Logging._LogLevel){return false}var a=anzovinmod.Logging._getLogLevelString(b);a+=": ";for(var c=1;c<arguments.length;++c){a+=anzovinmod.Utilities.pnt(arguments[c])}console.log(a);return true};anzovinmod.Logging.logm=function(c,a){if(arguments.length<=2){return false}if(typeof console==="undefined"){return false}if(c>anzovinmod.Logging._LogLevel){return false}var b=anzovinmod.Logging._getLogLevelString(c);b+=": "+a+"() ";for(var d=2;d<arguments.length;++d){b+=anzovinmod.Utilities.pnt(arguments[d])}console.log(b);return true};anzovinmod.Logging.logo=function(a){if(arguments.length<=1){return false}if(typeof console==="undefined"){return false}if(a>anzovinmod.Logging._LogLevel){return false}for(var b=1;b<arguments.length;++b){console.log(arguments[b])}return true};anzovinmod.Logging.setLogLevel=function(a){anzovinmod.Logging._LogLevel=a};anzovinmod.Logging.getLogLevel=function(){return anzovinmod.Logging._LogLevel}}());
/*! AsyncRequestObject.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.AsyncRequestObject=function(d,b,e,f,c){d=anzovinmod.Utilities.defaultParam(d,null);b=anzovinmod.Utilities.defaultParam(b,null);e=anzovinmod.Utilities.defaultParam(e,null);f=anzovinmod.Utilities.defaultParam(f,null);c=anzovinmod.Utilities.defaultParam(c,null);if(d==null){var a="anzovinmod.AsyncRequestObject() cannot create an empty request object with no type";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.AsyncRequestObject",a);throw a}if(b==null){var a="anzovinmod.AsyncRequestObject() cannot create an empty request object with no URL";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.AsyncRequestObject",a);throw a}this._type=d;this._url=b;this._setRequestHeaders=[];this._requestObject=null;this._requestObjectType=null;this._onSuccessCallback=e;this._onFailCallback=f;this._onStateChangeCallback=c;this._requestSent=false;this._init()};anzovinmod.AsyncRequestObject.prototype._init=function(){this._makeRequestObject()};anzovinmod.AsyncRequestObject.REQUEST_OBJECT_XMLHTTPREQUEST="XMLHttpRequest";anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MSXML2_XMLHTTP="ActiveXObject('Msxml2.XMLHTTP')";anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MICROSOFT_XMLHTTP="ActiveXObject('Microsoft.XMLHTTP')";anzovinmod.AsyncRequestObject.prototype._makeRequestObject=function(){if(this._requestObject!=null){this._requestObject.onreadystatechange=function(){};this._requestObject.abort()}var c=[];if(anzovinmod.Utilities.IsIE8()||anzovinmod.Utilities.IsIE9()){c=[anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MSXML2_XMLHTTP,anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MICROSOFT_XMLHTTP,anzovinmod.AsyncRequestObject.REQUEST_OBJECT_XMLHTTPREQUEST]}else{c=[anzovinmod.AsyncRequestObject.REQUEST_OBJECT_XMLHTTPREQUEST]}for(var b=0;b<c.length;++b){var d=c[b];anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.AsyncRequestObject._makeRequestObject","making a ",d," request object");switch(d){case anzovinmod.AsyncRequestObject.REQUEST_OBJECT_XMLHTTPREQUEST:this._requestObject=new XMLHttpRequest();this._requestObjectType=d;break;case anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MSXML2_XMLHTTP:try{this._requestObject=new ActiveXObject("Msxml2.XMLHTTP");this._requestObjectType=d}catch(f){this._requestObject=null;anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.AsyncRequestObject._makeRequestObject","cannot make request object: ",f)}break;case anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MICROSOFT_XMLHTTP:try{this._requestObject=new ActiveXObject("Microsoft.XMLHTTP");this._requestObjectType=d}catch(f){this._requestObject=null;anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.AsyncRequestObject._makeRequestObject","cannot make request object: ",f)}break;default:anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.AsyncRequestObject._makeRequestObject","unknown request object type, skipping");break}if(this._requestObject!=null){break}}if(this._requestObject==null){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.AsyncRequestObject._makeRequestObject","could not create request object");return}this._requestObject.open(this._type,this._url,true);this._requestObject.onreadystatechange=anzovinmod.Utilities.bind(this,this._requestObjectStateChangeCallback);for(var b=0;b<this._setRequestHeaders.length;++b){var a=this._setRequestHeaders[b];this._requestObject.setRequestHeader(a[0],a[1])}};anzovinmod.AsyncRequestObject.prototype._requestObjectStateChangeCallback=function(){if(this._onStateChangeCallback!=null){this._onStateChangeCallback(this)}if(this.isDone()){if(this.isSuccess()){if(this._onSuccessCallback!=null){this._onSuccessCallback(this)}}else{if(this._onFailCallback!=null){this._onFailCallback(this)}}}};anzovinmod.AsyncRequestObject.prototype.isSuccess=function(){if(!this._requestSent){return false}var b=this._requestObject.readyState;var a=this._requestObject.status;if(b==4){if(a==200){return true}}return false};anzovinmod.AsyncRequestObject.prototype.isGood=function(){if(!this._requestSent){return false}var b=this._requestObject.readyState;var a=this._requestObject.status;if(b==2||b==3||b==4){if(a==200){return true}}return false};anzovinmod.AsyncRequestObject.prototype.isDone=function(){if(!this._requestSent){return false}var a=this._requestObject.readyState;return(a==0||a==4)};anzovinmod.AsyncRequestObject.prototype.getResponseData=function(){if(this.isDone()){return this._requestObject.responseText}return null};anzovinmod.AsyncRequestObject.prototype.send=function(a){if(this._requestSent){this._requestObject.abort()}this._requestSent=true;a=anzovinmod.Utilities.defaultParam(a,null);this._requestObject.send(a)};anzovinmod.AsyncRequestObject.prototype.setRequestHeader=function(b,a){this._requestObject.setRequestHeader(b,a);this._setRequestHeaders.push([b,a])};anzovinmod.AsyncRequestObject.prototype.getReadyState=function(){return this._requestObject.readyState};anzovinmod.AsyncRequestObject.prototype.getStatusCode=function(){return this._requestObject.status};anzovinmod.AsyncRequestObject.prototype.getStatusText=function(){return this._requestObject.statusText};anzovinmod.AsyncRequestObject.prototype._timeoutSend=function(){this._send()};anzovinmod.AsyncRequestObject._blankFunction=function(){}}());
/*! Player.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.Player=function(b,a){b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);this._id=null;this._parent=b;this._divWrapper=null;this._divPlayerControls=null;this._isMobile=false;this._isMobileApp=false;this._controlCallbacks={};this._windowResizeCallbackFunction=null;this._windowBlurTimeout=null;this._windowBlurTimeoutFunction=anzovinmod.Utilities.bind(this,this._windowBlurTimeoutCallback);this._playerControlConfiguration={frame:["loading-frame","main-pause-frame","loading-login"],center:["main-begin-play","loading","loading-text"],top:["top-bar","back-empty"],left:[],bottom:["bottom-bar"],right:[],"top-left":["back"],"top-right":["login"],"bottom-left":["pause","replay","nodenav-back","nodenav-forward"],"bottom-right":["volume","volume-slider"]};this._playerControls={};this._replacementContainer=a;this._calledWidth="window";this._calledHeight="window";this._currentWidth=null;this._currentHeight=null;this._currentCssSize=null;this._mainTimeline=null;this._mainTimelineDivWrapper=null;this._isFlash=false;this._flashLoaded=false;this._flashAttachScenes=[];this._uiControlsShown=true;this._allowHidingUIElements={playing:false,ended:true,extraheight:true};this._lastMouseMovementTimer=null;this._lastMouseMovementTimerLength=3000;this._lastMouseMovementTimerFunction=null;this._lastPercentUpdateTime=null;this._lastPercentUpdateValue=0;this._lastPercentUpdateRealValue=0;this._lastPercentUpdateInterval=1000;this._posterImage=null;this._flashLoadBoundCallback=null;this._animationStartLoadTime=new Date();this._init()};anzovinmod.Player.prototype._init=function(){var q=this;this._id=anzovinmod.Player.uniqueIds.length+1;anzovinmod.Player.uniqueIds.push({id:this._id,player:this});this._divWrapper=document.createElement("div");this._divWrapper.setAttribute("class","anzovinmod-player");if(this._parent==null){this._parent=document.body}this._parent.appendChild(this._divWrapper);this._divPlayerControls=document.createElement("div");this._divPlayerControls.setAttribute("class","player-controls");this._divWrapper.appendChild(this._divPlayerControls);for(var m in this._playerControlConfiguration){if(!this._playerControlConfiguration.hasOwnProperty(m)){continue}var d=this._playerControlConfiguration[m];var r=document.createElement("div");if(m=="frame"){r.setAttribute("class","frame")}else{r.setAttribute("class","controls controls-"+m)}this._divPlayerControls.appendChild(r);for(var k=0;k<d.length;++k){var l=d[k];var f=document.createElement("div");var o=l.split(" ");var n="control";for(var g=0;g<o.length;++g){n+=" control-"+o[g]}f.setAttribute("class",n);r.appendChild(f);this._playerControls[l]=f;var c={state:false,"control-name":l};anzovinmod.Utilities.setDomElementProperty(f,"_anzovinmod",c);f.onclick=anzovinmod.Utilities.bind(this,this._controlClickCallback);switch(l){case"login":var b=document.createElement("div");b.setAttribute("class","text");b.innerHTML="Login";anzovinmod.Utilities.setDomElementProperty(b,"_anzovinmod",c);f.appendChild(b);break;case"back":case"pause":case"replay":case"nodenav-back":case"nodenav-forward":case"volume":case"main-pause":case"main-begin-play":var b=document.createElement("div");b.setAttribute("class","icon");anzovinmod.Utilities.setDomElementProperty(b,"_anzovinmod",c);f.appendChild(b);break;case"loading":var h=document.createElement("img");h.setAttribute("class","loading-image");h.src="../images/loading-size-l.gif";f.appendChild(h);break;case"loading-text":var b=document.createElement("div");b.innerHTML="Loading";f.appendChild(b);break;case"volume-slider":var p=document.createElement("input");p.setAttribute("type","range");p.setAttribute("min","0.0");p.setAttribute("max","1.0");p.setAttribute("step","0.01");p.setAttribute("value","0.5");f.appendChild(p);c["rangeslider-input"]=p;c["rangeslider-instance"]=new rangeslider(p,{polyfill:false,onSlide:function(j,i){if(q&&q._mainTimeline&&typeof q._mainTimeline.setVolume!=="undefined"){q._mainTimeline.setVolume(i)}},onSlideEnd:function(j,i){if(q&&q._mainTimeline&&typeof q._mainTimeline.setVolume!=="undefined"){q._mainTimeline.setVolume(i)}},rangeClass:"rangeslider",fillClass:"fill",handleClass:"handle",extraSelectClass:"extraselect"});break}}}if(this._replacementContainer==null){this._replacementContainer=new anzovinmod.ReplacementVariableContainer()}if(anzovinmod.MainTimeline){this._initCanvasMainTimeline()}else{this._isFlash=true}this._divWrapper.onmousemove=anzovinmod.Utilities.bind(this,this._playerMouseMoveHandler);this._lastMouseMovementTimerFunction=anzovinmod.Utilities.bind(this,this._playerMouseMoveTimeout);if(this._replacementContainer.has("PosterImageURL")){var e=this._replacementContainer.get("PosterImageURL");var h=document.createElement("img");h.setAttribute("class","poster");var a=this._divWrapper;h.onload=function(){a.appendChild(h)};h.src=e;this._posterImage=h}if(this._replacementContainer.has("IsMobile")){this.isMobile(this._replacementContainer.get("IsMobile")=="1")}this._windowResizeCallbackFunction=anzovinmod.Utilities.bind(this,this._windowResizeCallback);if(window.addEventListener){window.addEventListener("resize",this._windowResizeCallbackFunction)}else{if(window.attachEvent){window.attachEvent("onresize",this._windowResizeCallbackFunction)}}this._setupWindowFocusBlurCallbacks();if(!this._isFlash){this._mainTimeline.addUnhandledMouseClickCallback(anzovinmod.Utilities.bind(this,this._unhandledStageMouseClick))}};anzovinmod.Player.prototype.startManifestLoading=function(){this._mainTimeline.startManifestLoading()};anzovinmod.Player.prototype._unhandledStageMouseClick=function(a){if(this._isMobile){if(this._allowHidingUIElements&&this._uiControlsShown){this._hideControlsAndCleanupTimeoutTimer()}else{this._showControlsAndResetMovementTimeoutTimer()}}};anzovinmod.Player.prototype.pauseAnimation=function(){if(this._playerControls.hasOwnProperty("pause")){var b=this._playerControls.pause;var a=anzovinmod.Utilities.getDomElementProperty(b,"_anzovinmod");if(!a.state){this._controlClickHandle(this._playerControls.pause,"pause")}}};anzovinmod.Player.prototype._setupWindowFocusBlurCallbacks=function(){if("hidden" in document){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback with 'hidden' support");this._attachFocusBlurListener(document,"visibilitychange",this._windowVisibilityChangeCallback)}else{if("mozHidden" in document){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback with 'mozHidden' support");this._attachFocusBlurListener(document,"mozvisibilitychange",this._windowVisibilityChangeCallback)}else{if("webkitHidden" in document){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback with 'webkitHidden' support");this._attachFocusBlurListener(document,"webkitvisibilitychange",this._windowVisibilityChangeCallback)}else{if("msHidden" in document){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback with 'msHidden' support");this._attachFocusBlurListener(document,"msvisibilitychange",this._windowVisibilityChangeCallback)}else{if(anzovinmod.Utilities.IsIE9()){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback without 'hidden' support, for IE9 specifically");this._attachFocusBlurListener(window,"focus",this._windowFocusCallback);this._attachFocusBlurListener(window,"blur",this._windowBlurCallback)}else{if(anzovinmod.Utilities.IsIE8()){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback without 'hidden' support, for IE8 specifically");this._attachFocusBlurListener(document,"onfocusin",this._windowFocusCallback);this._attachFocusBlurListener(document,"onfocusout",this._windowBlurCallback)}else{anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback without 'hidden' support, other");this._attachFocusBlurListener(document,"focus",this._windowFocusCallback);this._attachFocusBlurListener(document,"blur",this._windowBlurCallback);this._attachFocusBlurListener(document,"onfocusin",this._windowFocusCallback);this._attachFocusBlurListener(document,"onfocusout",this._windowBlurCallback);this._attachFocusBlurListener(document,"focusin",this._windowFocusCallback);this._attachFocusBlurListener(document,"focusout",this._windowBlurCallback);this._attachFocusBlurListener(document,"pageshow",this._windowFocusCallback);this._attachFocusBlurListener(document,"pagehide",this._windowBlurCallback)}}}}}}};anzovinmod.Player.prototype._attachFocusBlurListener=function(c,b,a){c=anzovinmod.Utilities.defaultParam(c,null);b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);if(c==null||b==null||a==null){return}if(c.addEventListener){c.addEventListener(b,anzovinmod.Utilities.bind(this,a))}else{if(c.attachEvent){c.attachEvent(b,anzovinmod.Utilities.bind(this,a))}}};anzovinmod.Player.prototype._windowVisibilityChangeCallback=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._windowVisibilityChangeCallback","visibility changed callback");var a=false;if("hidden" in document){a=document.hidden}else{if("mozHidden" in document){a=document.mozHidden}else{if("webkitHidden" in document){a=document.webkitHidden}else{if("msHidden" in document){a=document.msHidden}}}}if(a){this.pauseAnimation()}};anzovinmod.Player.prototype._windowFocusCallback=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._windowFocusCallback","focused callback");if(this._windowBlurTimeout!=null){clearTimeout(this._windowBlurTimeout);this._windowBlurTimeout=null}};anzovinmod.Player.prototype._windowBlurCallback=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._windowBlurCallback","blurred callback");if(this._windowBlurTimeout==null){this._windowBlurTimeout=setTimeout(this._windowBlurTimeoutFunction,1)}};anzovinmod.Player.prototype._windowBlurTimeoutCallback=function(){this.pauseAnimation()};anzovinmod.Player.prototype._windowResizeCallback=function(){this.resize()};anzovinmod.Player.prototype.isMobile=function(a){a=anzovinmod.Utilities.defaultParam(a,false,true);if(a!=this._isMobile){this._isMobile=a;var d=this._divWrapper.getAttribute("class");var b=d;if(a){b=anzovinmod.Utilities.addStringComponent(d,"is-mobile")}else{b=anzovinmod.Utilities.removeStringComponent(d,"is-mobile")}if(d!=b){this._divWrapper.setAttribute("class",b)}}};anzovinmod.Player.prototype.isMobileApp=function(a){a=anzovinmod.Utilities.defaultParam(a,false,true);if(a!=this._isMobileApp){this._isMobileApp=a;var d=this._divWrapper.getAttribute("class");var b=d;if(a){b=anzovinmod.Utilities.addStringComponent(d,"is-mobile-app")}else{b=anzovinmod.Utilities.removeStringComponent(d,"is-mobile-app")}if(d!=b){this._divWrapper.setAttribute("class",b)}}};anzovinmod.Player.prototype.addControlCallback=function(b,a){a=anzovinmod.Utilities.defaultParam(a,null);b=anzovinmod.Utilities.defaultParam(b,null);if(a==null||b==null){return}if(!this._controlCallbacks.hasOwnProperty(a)){this._controlCallbacks[a]=[]}this._controlCallbacks[a].push(b)};anzovinmod.Player.prototype.removeControlCallback=function(d,c){c=anzovinmod.Utilities.defaultParam(c,null);d=anzovinmod.Utilities.defaultParam(d,null);if(d==null){return}if(c==null){for(var a in this._controlCallbacks){if(!this._controlCallbacks.hasOwnProperty(a)){continue}for(var b=0;b<this._controlCallbacks[a].length;++b){if(this._controlCallbacks[a][b]==d){this._controlCallbacks[a].splice(b,1);--b}}}}else{if(this._controlCallbacks.hasOwnProperty(c)){for(var b=0;b<this._controlCallbacks[c].length;++b){if(this._controlCallbacks[c][b]==d){this._controlCallbacks[c].splice(b,1);--b}}}}};anzovinmod.Player.prototype._initCanvasMainTimeline=function(){this._mainTimeline=new anzovinmod.MainTimeline(this._divWrapper,this._replacementContainer);this._mainTimelineDivWrapper=this._mainTimeline.getDivWrapper();this._mainTimeline.addAnimationEventCallback(anzovinmod.Utilities.bind(this,this._handleTriggeredAnimationEvent));this._mainTimeline.addStateChangeCallback(anzovinmod.Utilities.bind(this,this._mainTimelineStateChangeCallback));this._mainTimeline.addPlaybackPercentCallback(anzovinmod.Utilities.bind(this,this.setPlaybackPercent))};anzovinmod.Player.prototype._initFlashMainTimeline=function(){if(this._flashAttachScenes.length==0){return}var d=this._flashAttachScenes[0]["name"];var f=document.createElement("div");f.setAttribute("class","anzovinmod-maintimeline-flash");var c="<object";var b={id:"flashInstance",name:"flashInstance",data:"../flash/"+d+".swf",type:"application/x-shockwave-flash"};for(var a in b){if(!b.hasOwnProperty(a)){continue}c+=" "+a+'="'+b[a]+'"'}c+=">";c+='<div class="noflash"><p>This video requires Adobe Flash Player.</p><p>To watch this video, please install Adobe Flash Player or open this link in a different browser.</p><p><a target="_blank" href="http://get.adobe.com/flashplayer/">Click here to download from Adobe</a></p><a target="_blank" href="http://get.adobe.com/flashplayer/"><img src="../images/getflash.png" width="158px" height="39px"></a></div>';var g={movie:"../flash/"+d+".swf",quality:"best",bgcolor:"#ffffff",play:"true",loop:"true",wmode:"opaque",scale:"showall",menu:"true",devicefont:"false",salign:"",allowScriptAccess:"always",transparent:"wmode"};for(var a in g){if(!g.hasOwnProperty(a)){continue}c+='<param name="'+a+'" value="'+g[a]+'" />'}c+="</object>";f.innerHTML=c;var e=f.children[0];this._mainTimeline=e;this._mainTimelineDivWrapper=f;this._divWrapper.appendChild(f);this._flashLoadTimerFunction()};anzovinmod.Player.prototype._flashLoadTimerFunction=function(){if(typeof this._mainTimeline.isState==="undefined"){if(this._flashLoadBoundCallback==null){this._flashLoadBoundCallback=anzovinmod.Utilities.bind(this,this._flashLoadTimerFunction)}setTimeout(this._flashLoadBoundCallback,100);return}this._flashLoaded=true;for(var a=0;a<this._flashAttachScenes.length;++a){this._mainTimeline.setSceneInfo(this._flashAttachScenes[a])}this._flashAttachScenes=[];this._mainTimeline.setLogLevel(anzovinmod.Logging.getLogLevel());anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._flashLoadTimerFunction","flash has loaded and has function callbacks");this._flashLoadBoundCallback=null;this._mainTimeline.addStateChangeCallback("anzovinmod.Player.findPlayerInstance("+this._id+") ? anzovinmod.Player.findPlayerInstance("+this._id+")._mainTimelineStateChangeCallback(#) : anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,'_','flash callback cannot identify player with id "+this._id+"')");this._mainTimeline.addAnimationEventCallback("anzovinmod.Player.findPlayerInstance("+this._id+") ? anzovinmod.Player.findPlayerInstance("+this._id+")._handleTriggeredAnimationEvent(#) : anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,'_','flash callback cannot identify player with id "+this._id+"')");this._mainTimeline.addPlaybackPercentCallback("anzovinmod.Player.findPlayerInstance("+this._id+") ? anzovinmod.Player.findPlayerInstance("+this._id+").setPlaybackPercent(#) : anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,'_','flash callback cannot identify player with id "+this._id+"')");if(this._playerControls.hasOwnProperty("volume-slider")){if(this._playerControls["volume-slider"]!=null){this._mainTimeline.setVolume(this._playerControls["volume-slider"].children[0].value)}}this._mainTimeline.setReplacementContainer(this._replacementContainer);this._mainTimeline.setStates({bare:false,unloaded:true});this._mainTimeline.setStates({unloaded:false,loading:true});this._mainTimeline.setStates({loading:false,loaded:true});this.resize()};anzovinmod.Player.prototype._mainTimelineStateChangeCallback=function(m){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._mainTimelineStateChangeCallback","state change callback called by mtl: ",m);m=anzovinmod.Utilities.defaultParam(m,[],true);var g={};for(var f=0;f<m.length;++f){g[m[f]]=this._mainTimeline.isState(m[f])}var k;var h;for(var f=0;f<m.length;++f){switch(m[f]){case"manifestloading":case"loading":this._resizeLoginButtonOverlay();break;case"loaded":k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.addStringComponent(k,"mtl-loaded");if(k!=h){this._divWrapper.setAttribute("class",h)}this._sendAnimationLoadTimeEvent(new Date());break;case"started":k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.addStringComponent(k,"mtl-started");if(k!=h){this._divWrapper.setAttribute("class",h)}this.buildJumpBar();break;case"playing":if(g[m[f]]){k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.addStringComponent(k,"mtl-playing");this._allowHidingUIElements.playing=true}else{k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.removeStringComponent(k,"mtl-playing");this._allowHidingUIElements.playing=false}if(k!=h){this._divWrapper.setAttribute("class",h)}this._showControlsAndResetMovementTimeoutTimer();break;case"ended":if(g[m[f]]){k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.addStringComponent(k,"mtl-ended");this._allowHidingUIElements.ended=false}else{k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.removeStringComponent(k,"mtl-ended");this._allowHidingUIElements.ended=true}if(k!=h){this._divWrapper.setAttribute("class",h)}this._showControlsAndResetMovementTimeoutTimer();if(this._lastPercentUpdateRealValue>=95){this.setPlaybackPercent(100)}break;case"willresize":if(this._mainTimeline.isState("willresize")){this.resize();this._mainTimeline.setStates({willresize:false,resize:false},false)}break;case"hardpaused":var b=this._mainTimeline.isState("hardpaused");var e=["pause","main-pause","main-pause-frame"];for(var d=0;d<e.length;++d){var a=null;if(this._playerControls.hasOwnProperty(e[d])){a=this._playerControls[e[d]]}if(a==null){continue}var l=anzovinmod.Utilities.getDomElementProperty(a,"_anzovinmod");k=a.getAttribute("class");h=k;if(b==l.state){continue}else{if(b){h=anzovinmod.Utilities.addStringComponent(k,"active")}else{h=anzovinmod.Utilities.removeStringComponent(k,"active")}}l.state=b;a.setAttribute("class",h)}break}}};anzovinmod.Player.prototype._playerMouseMoveHandler=function(a){if(this._uiControlsShown||!this._isMobile){this._showControlsAndResetMovementTimeoutTimer()}};anzovinmod.Player.prototype._playerMouseMoveTimeout=function(){this._hideControlsAndCleanupTimeoutTimer()};anzovinmod.Player.prototype._showControlsAndResetMovementTimeoutTimer=function(){if(this._lastMouseMovementTimer!=null){clearTimeout(this._lastMouseMovementTimer);this._lastMouseMovementTimer=null}if(!this._uiControlsShown){this._divPlayerControls.setAttribute("class",anzovinmod.Utilities.removeStringComponent(this._divPlayerControls.getAttribute("class"),"no-controls"));this._uiControlsShown=true}if(this._mainTimeline!=null){var b=true;b=b&&this._mainTimeline!=null;b=b&&(typeof this._mainTimeline.isState!=="undefined");b=b&&!this._mainTimeline.isState("hardpaused");for(var a in this._allowHidingUIElements){if(!this._allowHidingUIElements.hasOwnProperty(a)){continue}b=b&&this._allowHidingUIElements[a]}if(b){this._lastMouseMovementTimer=setTimeout(this._lastMouseMovementTimerFunction,this._lastMouseMovementTimerLength)}}};anzovinmod.Player.prototype._hideControlsAndCleanupTimeoutTimer=function(){if(this._uiControlsShown){var b=true;b=b&&(typeof this._mainTimeline.isState)!=="undefined";b=b&&!this._mainTimeline.isState("hardpaused");for(var a in this._allowHidingUIElements){if(!this._allowHidingUIElements.hasOwnProperty(a)){continue}b=b&&this._allowHidingUIElements[a]}if(b){this._divPlayerControls.setAttribute("class",anzovinmod.Utilities.addStringComponent(this._divPlayerControls.getAttribute("class"),"no-controls"));this._uiControlsShown=false}}if(this._lastMouseMovementTimer!=null){clearTimeout(this._lastMouseMovementTimer);this._lastMouseMovementTimer=null}};anzovinmod.Player.prototype._sendAnimationLoadTimeEvent=function(a){a=anzovinmod.Utilities.defaultParam(a,null);var b=null;if(a!=null){b=a.getTime()-this._animationStartLoadTime.getTime()}this._handleTriggeredAnimationEvent("LoadTimer",b)};anzovinmod.Player.prototype._handleTriggeredAnimationEvent=function(a,c){try{this._sendEventLog(a,c)}catch(b){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.Player._handleTriggeredAnimationEvent","exception occurred while trying to send log event: ",b)}};anzovinmod.Player.prototype._sendEventLog=function(b,d){b=anzovinmod.Utilities.defaultParam(b,null);d=anzovinmod.Utilities.defaultParam(d,null);var a=new anzovinmod.AsyncRequestObject("POST",this._replacementContainer.get("EventLogURL"));a.setRequestHeader("APIKey",this._replacementContainer.get("ApiKey"));a.setRequestHeader("Content-Type","application/json");a.setRequestHeader("AuthHash",this._replacementContainer.get("AuthHash"));var c={EmployerId:this._replacementContainer.get("EmployerId"),EventId:0,EventName:b,ExperienceUserId:this._replacementContainer.get("ExperienceUserId"),LogComment:d,ContentId:null};switch(b){case"StartAnimation":c.EventId=4;break;case"EndAnimation":c.EventId=5;break;case"StartQuiz":c.EventId=6;break;case"EndQuiz":c.EventId=7;break;case"HelpfulYes":c.EventId=13;break;case"HelpfulNo":c.EventId=14;break;case"AuthenticationSuccess":c.EventId=15;break;case"ReplayAnimation":c.EventId=17;break;case"GoToCch":c.EventId=18;break;case"GoToPlan":c.EventId=19;break;case"Error":c.EventId=22;break;case"LoadTimer":c.EventId=24;break;default:c.EventId=22;c.EventName="Error";if(c.LogComment==null){c.LogComment=""}else{c.LogComment+=";"}c.LogComment+="no event named "+b;break}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._sendEventLog","logging triggered animation event: ",b," ",d);anzovinmod.Logging.logo(anzovinmod.Logging.LOG_DEBUG,a);anzovinmod.Logging.logo(anzovinmod.Logging.LOG_DEBUG,c);a.send(JSON.stringify(c))};anzovinmod.Player.prototype._controlClickCallback=function(b){if(anzovinmod.Utilities.IsIE8()){b=window.event;var c=b.srcElement;if(c==null){return}if(c.getAttribute("class")=="rangeslider"){c=c.parentNode;if(c==null){return}}var a=anzovinmod.Utilities.getDomElementProperty(c,"_anzovinmod");if(a==null){return}this._controlClickHandle(c,a["control-name"])}else{if(b.target==null){return}if(!b.target.hasOwnProperty("_anzovinmod")){return}this._controlClickHandle(b.target,b.target._anzovinmod["control-name"])}};anzovinmod.Player.prototype._controlClickHandle=function(n,f){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClickHandle","click registered on control: ",f);n=anzovinmod.Utilities.defaultParam(n,null);f=anzovinmod.Utilities.defaultParam(f,null);if(n==null){return}if(f==null){return}if(!this._playerControls.hasOwnProperty(f)){if(f!="jumpnode"){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.Player._controlClickHandle","no owned control of name: ",f);return}}var d=this._playerControls[f];var l=false;if(d!=null){var l=!(anzovinmod.Utilities.getDomElementProperty(d,"_anzovinmod")["state"])}var h=[];var e=null;switch(f){case"volume":h=["volume"];break;case"pause":case"main-pause":case"main-pause-frame":if(this._mainTimeline.isState("playing")){h=["pause","main-pause","main-pause-frame"]}break;case"begin-play":case"main-begin-play":if(this._mainTimeline.isState("loaded")&&!this._mainTimeline.isState("playing")){h=["begin-play","main-begin-play"]}break}for(var g=0;g<h.length;++g){var b=h[g];switch(b){case"volume":case"pause":case"main-pause":case"main-pause-frame":if(!this._playerControls.hasOwnProperty(b)){continue}var k=this._playerControls[b];var m=anzovinmod.Utilities.getDomElementProperty(k,"_anzovinmod");m.state=l;if(m.state){k.setAttribute("class",anzovinmod.Utilities.addStringComponent(k.getAttribute("class"),"active"))}else{k.setAttribute("class",anzovinmod.Utilities.removeStringComponent(k.getAttribute("class"),"active"))}break}}switch(f){case"login":case"loading-login":var a=null;var c=this._mainTimeline.getLoginButtonConfig();if(c!=null&&c.hasOwnProperty("url")&&c.url!=null){a=c.url}if(a==null){a="http://www.clearcosthealth.com/"}this._handleTriggeredAnimationEvent("GoToCch",null);window.open(a,"_blank");break;case"volume":e="volume";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","volume [un-]muting");if(l){this._mainTimeline.setMute(true)}else{this._mainTimeline.setMute(false)}break;case"pause":case"main-pause":case"main-pause-frame":e="pause";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback [un-]pausing");if(this._mainTimeline.isState("playing")){this._mainTimeline.setState("hardpaused",l)}break;case"begin-play":case"main-begin-play":e="begin-play";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback starting");if(this._mainTimeline.isState("loaded")&&!this._mainTimeline.isState("playing")){if(this._playerControls.hasOwnProperty("volume-slider")){var j=anzovinmod.Utilities.getDomElementProperty(this._playerControls["volume-slider"],"_anzovinmod");if(j["rangeslider-instance"]){j["rangeslider-instance"].setValue(0.5,true);j["rangeslider-instance"].update()}}this._mainTimeline.startAnimation()}break;case"replay":e="replay";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback replaying");if(this._mainTimeline.isState("ended")){this._mainTimeline.replayAnimation()}break;case"nodenav-back":e="nodenav-back";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback jumping back a node");if(this._mainTimeline.isState("started")){this._mainTimeline.goNodeBack()}break;case"nodenav-forward":e="nodenav-forward";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback jumping forward a node");if(this._mainTimeline.isState("started")){this._mainTimeline.goNodeForward()}break;case"jumpnode":if(!this._isMobile){e="jumpnode";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback jumping to a node");if(this._mainTimeline.isState("started")){var j=anzovinmod.Utilities.getDomElementProperty(n,"_anzovinmod");this._mainTimeline.goNodeTo(j["control-value"])}}break;case"back":e="back";break}this._showControlsAndResetMovementTimeoutTimer();if(e!=null){if(this._controlCallbacks.hasOwnProperty(e)){for(var g=0;g<this._controlCallbacks[e].length;++g){this._controlCallbacks[e][g](this,e)}}}};anzovinmod.Player.prototype.getMainTimeline=function(){return this._mainTimeline};anzovinmod.Player.prototype.resize=function(a,g){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.Player.resize","resizing player to (",a,",",g,")");a=anzovinmod.Utilities.defaultParam(a,this._calledWidth,true);g=anzovinmod.Utilities.defaultParam(g,this._calledHeight,true);var f=a;var d=g;a=(a!="canvas"?a:(this._mainTimeline._canvasWidth!=null?this._mainTimeline._canvasWidth:"100%"));g=(g!="canvas"?g:(this._mainTimeline._canvasHeight!=null?this._mainTimeline._canvasHeight:"100%"));var e=anzovinmod.Utilities.simplifyPotentialResizeValues(this._parent,a,g);var c=1;var i=null;if(this._mainTimeline!=null){if(typeof this._mainTimeline.getCanvasSize!=="undefined"){i=this._mainTimeline.getCanvasSize();if(i!=null){if(i.width!=null&&i.height!=null){c=anzovinmod.Utilities.calculateBoundScale(e.width,e.height,i.width,i.height,this._mainTimeline.getResizeBehaviors())}}}}var h=e.width;var b=e.height;if(i!=null){if(i.width!=null&&i.height!=null){h=i.width*c;b=i.height*c}}this._setResize(f,d,h,b,c)};anzovinmod.Player.prototype._setResize=function(g,i,h,f,e){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.Player._setResize","called(",g,",",i,") display(",h,",",f,") scale(",e,")");g=anzovinmod.Utilities.defaultParam(g,null);i=anzovinmod.Utilities.defaultParam(i,null);h=anzovinmod.Utilities.defaultParam(h,null);f=anzovinmod.Utilities.defaultParam(f,null);e=anzovinmod.Utilities.defaultParam(e,null);if(g==null||i==null){return}this._calledWidth=g;this._calledHeight=i;if(h==null||f==null||e==null){return}this._currentWidth=h;this._currentHeight=f;this._divWrapper.style.width=h+"px";this._divWrapper.style.height=f+"px";if(this._mainTimeline!=null){if(!this._isFlash){this._mainTimeline.setSize(g,i,h,f,e)}else{this._mainTimeline.setAttribute("width",h+"px");this._mainTimeline.setAttribute("height",f+"px")}}var a="size-";if(h>1400){a+="m"}else{a+="s"}if(this._currentCssSize==null||this._currentCssSize!=a){var r=this._divWrapper.getAttribute("class");var n=r;if(this._currentCssSize!=null){n=anzovinmod.Utilities.removeStringComponent(n,this._currentCssSize)}n=anzovinmod.Utilities.addStringComponent(n,a);if(r!=n){this._divWrapper.setAttribute("class",n)}this._currentCssSize=a}this._resizeLoginButtonOverlay();if(this._playerControls.hasOwnProperty("volume-slider")){var p=this._playerControls["volume-slider"];var k=anzovinmod.Utilities.getDomElementProperty(p,"_anzovinmod");if(k!=null&&k.hasOwnProperty("rangeslider-input")){if(k["rangeslider-instance"]){k["rangeslider-instance"].update()}}}var t=null;if(this._playerControls.hasOwnProperty("loading")){t=this._playerControls.loading}if(t!=null){var j=t.children[0];var s=j.src;var b="../images/loading-"+a+".gif";if(s!=b){j.src=b}}if(this._posterImage!=null){this._posterImage.style.width=h+"px";this._posterImage.style.height=f+"px"}var l=anzovinmod.Utilities.getWindowSize();var m={top:0,bottom:0};var d={top:0,bottom:0};if(l.height>f){switch(a){case"size-l":d.top=80;d.bottom=100;break;case"size-m":d.top=80;d.bottom=70;break;case"size-s":d.top=60;if(this._isMobile){d.bottom=60}else{d.bottom=48}break}var o=d.top+d.bottom;var q=l.height-f;if(q>=o){m.top=d.top;m.bottom=d.bottom;this._allowHidingUIElements.extraheight=false;this._showControlsAndResetMovementTimeoutTimer()}else{this._allowHidingUIElements.extraheight=true;this._showControlsAndResetMovementTimeoutTimer()}}else{this._allowHidingUIElements.extraheight=true;this._showControlsAndResetMovementTimeoutTimer()}if(!this._isFlash){this._mainTimeline.getDivWrapper().style.top=m.top+"px"}else{if(this._mainTimeline!=null){this._mainTimeline.parentNode.style.top=m.top+"px"}}this._divWrapper.style.height=(f+m.top+m.bottom)+"px"};anzovinmod.Player.prototype.buildJumpBar=function(){var s=this._mainTimeline.getProgressNodes();if(s==null||s.length==0){return false}var d=[];for(var t in s){if(!s.hasOwnProperty(t)){continue}var z=s[t];if(!z.hasOwnProperty("position")){continue}if(z.position==null){continue}var l=false;for(var v=0;v<d.length;++v){var c=d[v];if(c.position>=z.position){continue}d.push(z);var x=d.length-1;for(var u=v;u<x;++u){var r=d[u];d[u]=d[x];d[x]=r}l=true;break}if(!l){d.push(z)}}s=d;anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player.buildJumpBar","ordered nodes: ",s);var n=document.createElement("div");n.setAttribute("class","control jumpcontrols");this._playerControls.jumpbar=n;var A=document.createElement("div");A.setAttribute("class","jumpcontrols-wrapped");n.appendChild(A);var b=document.createElement("div");b.setAttribute("class","path-left");A.appendChild(b);var o=document.createElement("div");o.setAttribute("class","path-center");A.appendChild(o);var e=document.createElement("div");e.setAttribute("class","path-right");A.appendChild(e);var b=document.createElement("div");b.setAttribute("class","overpath-left");A.appendChild(b);var o=document.createElement("div");o.setAttribute("class","overpath-center");A.appendChild(o);var e=document.createElement("div");e.setAttribute("class","overpath-right");A.appendChild(e);this._playerControls["jumpbar-overlaypath-center"]=o;this._playerControls["jumpbar-overlaypath-right"]=e;var q=0;var g=document.createElement("div");g.setAttribute("class","button-wrapper");A.appendChild(g);var w=document.createElement("div");w.setAttribute("class","buttons");g.appendChild(w);for(var v=0;v<s.length;++v){var z=s[v];if(!z.hasOwnProperty("position")){continue}if(z.position==null){continue}var a=document.createElement("div");var m={state:false,"control-name":"jumpnode","control-value":z.name};a.setAttribute("class","button");a.style.left=z.position+"%";anzovinmod.Utilities.setDomElementProperty(a,"_anzovinmod",m);a.setAttribute("position",z.position);a.setAttribute("isactive",0);var B=document.createElement("div");B.setAttribute("class","button-circle");a.appendChild(B);var h=document.createElement("div");h.setAttribute("class","button-click-area");var y=anzovinmod.Utilities.bind(this,this._controlClickCallback);h.onclick=y;anzovinmod.Utilities.setDomElementProperty(h,"_anzovinmod",m);a.appendChild(h);w.appendChild(a);++q}this._playerControls["jumpbar-buttons"]=w;if(q==0){return false}for(var v=0;v<this._divPlayerControls.children.length;++v){var p=this._divPlayerControls.children[v];if(anzovinmod.Utilities.hasStringComponent(p.getAttribute("class"),"controls-bottom")){p.appendChild(n);return true}}return false};anzovinmod.Player.prototype.attachScene=function(b){if(!this._isFlash){this._mainTimeline.attachScene(b)}else{var a=anzovinmod.instance.Scenes[b]["properties"];if(a!=null){if(this._flashLoaded){this._mainTimeline.setSceneInfo(a)}else{this._flashAttachScenes.push(a)}}}};anzovinmod.Player.prototype.startStage=function(){if(!this._isFlash){this._mainTimeline.startStage()}else{this._initFlashMainTimeline()}};anzovinmod.Player.prototype.setPlaybackPercent=function(g){g=anzovinmod.Utilities.defaultParam(g,null);if(g==null){return}var b=new Date().getTime();var j=!(this._lastPercentUpdateInterval>0);if(g<=0){g=0;j=true}else{if(g>=100){g=100;j=true}}if(!j){if(this._lastPercentUpdateInterval==0||this._lastPercentUpdateTime==null||b-this._lastPercentUpdateTime>=this._lastPercentUpdateInterval){j=true}if(!j){if(this._playerControls.hasOwnProperty("jumpbar-buttons")){var a=this._playerControls["jumpbar-buttons"];for(var e=0;e<a.children.length;++e){var d=a.children[e];if(this._lastPercentUpdateValue<d.getAttribute("position")&&d.getAttribute("position")<=g){j=true;break}}}}}this._lastPercentUpdateRealValue=g;if(!j){return}if(this._lastPercentUpdateInterval>0){this._lastPercentUpdateTime=b;this._lastPercentUpdateValue=g}if(this._playerControls.hasOwnProperty("jumpbar-overlaypath-center")){var k=this._playerControls["jumpbar-overlaypath-center"];if(k.style.width!=g+"%"){k.style.width=g+"%"}}if(this._playerControls.hasOwnProperty("jumpbar-overlaypath-right")){var k=this._playerControls["jumpbar-overlaypath-right"];if(k.style.left!=g+"%"){k.style.left=g+"%"}}if(this._playerControls.hasOwnProperty("jumpbar-buttons")){var a=this._playerControls["jumpbar-buttons"];for(var e=0;e<a.children.length;++e){var d=a.children[e];if(d.getAttribute("position")>g){if(d.getAttribute("isactive")==1){var h=d.getAttribute("class");var f=anzovinmod.Utilities.removeStringComponent(h,"active");if(h!=f){d.setAttribute("class",f)}d.setAttribute("isactive",0)}}else{if(d.getAttribute("isactive")==0){var h=d.getAttribute("class");var f=anzovinmod.Utilities.addStringComponent(h,"active");if(h!=f){d.setAttribute("class",f)}d.setAttribute("isactive",1)}}}}};anzovinmod.Player.prototype._resizeLoginButtonOverlay=function(){if(this._currentWidth==null||this._currentHeight==null){return}if(!this._playerControls.hasOwnProperty("loading-login")){return}var c=this._playerControls["loading-login"];var f=null;if(this._mainTimeline!=null){f=this._mainTimeline.getLoginButtonConfig()}var e=1;var d=1;var g=0;var b=0;var a=0;var h=0;if(f!=null){e=this._currentWidth/f.imageSizeWidth;d=this._currentHeight/f.imageSizeHeight;g=f.width;b=f.height;a=f.x;h=f.y}c.style.width=(e*g)+"px";c.style.height=(d*b)+"px";c.style.left=(e*a)+"px";c.style.top=(d*h)+"px"};anzovinmod.Player.findPlayerInstance=function(c){for(var a=0;a<anzovinmod.Player.uniqueIds.length;++a){var b=anzovinmod.Player.uniqueIds[a];if(b.id==c){return b.player}}return null};anzovinmod.Player.uniqueIds=[]}());
/*! ReplacementVariableContainer.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.ReplacementVariableContainer=function(){this._adds={};this._defs={}};anzovinmod.ReplacementVariableContainer.prototype.add=function(c,b,a){c=anzovinmod.Utilities.defaultParam(c,null);b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);if(c==null){return}if(a!=b){this._adds[c]=b}};anzovinmod.ReplacementVariableContainer.prototype.def=function(b,a){b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);if(b==null){return}this._defs[b]=a};anzovinmod.ReplacementVariableContainer.prototype.has=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return false}return this.hasAdd(a)||this.hasDef(a)};anzovinmod.ReplacementVariableContainer.prototype.hasAdd=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return false}return this._adds.hasOwnProperty(a)};anzovinmod.ReplacementVariableContainer.prototype.hasDef=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return false}return this._defs.hasOwnProperty(a)};anzovinmod.ReplacementVariableContainer.prototype.get=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}if(this.hasAdd(a)){return this._adds[a]}if(this.hasDef(a)){return this._defs[a]}return null};anzovinmod.ReplacementVariableContainer.prototype.getAdd=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}if(this.hasAdd(a)){return this._adds[a]}return null};anzovinmod.ReplacementVariableContainer.prototype.getDef=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}if(this.hasDef(a)){return this._defs[a]}return null};anzovinmod.ReplacementVariableContainer.prototype.addWindowHash=function(c){var a=this._parseWindowHash(c);for(var b=0;b<a.length;++b){this._adds[a[b][0]]=a[b][1]}};anzovinmod.ReplacementVariableContainer.prototype.defWindowHash=function(c){var a=this._parseWindowHash(c);for(var b=0;b<a.length;++b){this._defs[a[b][0]]=a[b][1]}};anzovinmod.ReplacementVariableContainer.prototype._parseWindowHash=function(g){g=anzovinmod.Utilities.defaultParam(g,null);var e=[];if(g==null||g==""||g=="#"){return e}var b=g.substr(1);var d=b.split("&");for(var f=0;f<d.length;++f){var a=d[f].split("=");if(a.length>=2){var h=a.shift();var c=a.join("=");e.push([decodeURIComponent(h),decodeURIComponent(c)])}}for(var f=0;f<e.length;++f){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.ReplacementVariableContainer._parseWindowHash",e[f][0],e[f][1])}return e}}());