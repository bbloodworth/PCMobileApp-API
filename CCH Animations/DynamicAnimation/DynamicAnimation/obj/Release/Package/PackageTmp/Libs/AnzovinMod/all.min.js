/*! AsyncRequestObject.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.AsyncRequestObject=function(d,b,e,f,c){d=anzovinmod.Utilities.defaultParam(d,null);b=anzovinmod.Utilities.defaultParam(b,null);e=anzovinmod.Utilities.defaultParam(e,null);f=anzovinmod.Utilities.defaultParam(f,null);c=anzovinmod.Utilities.defaultParam(c,null);if(d==null){var a="anzovinmod.AsyncRequestObject() cannot create an empty request object with no type";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.AsyncRequestObject",a);throw a}if(b==null){var a="anzovinmod.AsyncRequestObject() cannot create an empty request object with no URL";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.AsyncRequestObject",a);throw a}this._type=d;this._url=b;this._setRequestHeaders=[];this._requestObject=null;this._requestObjectType=null;this._onSuccessCallback=e;this._onFailCallback=f;this._onStateChangeCallback=c;this._requestSent=false;this._init()};anzovinmod.AsyncRequestObject.prototype._init=function(){this._makeRequestObject()};anzovinmod.AsyncRequestObject.REQUEST_OBJECT_XMLHTTPREQUEST="XMLHttpRequest";anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MSXML2_XMLHTTP="ActiveXObject('Msxml2.XMLHTTP')";anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MICROSOFT_XMLHTTP="ActiveXObject('Microsoft.XMLHTTP')";anzovinmod.AsyncRequestObject.prototype._makeRequestObject=function(){if(this._requestObject!=null){this._requestObject.onreadystatechange=function(){};this._requestObject.abort()}var c=[];if(anzovinmod.Utilities.IsIE8()||anzovinmod.Utilities.IsIE9()){c=[anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MSXML2_XMLHTTP,anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MICROSOFT_XMLHTTP,anzovinmod.AsyncRequestObject.REQUEST_OBJECT_XMLHTTPREQUEST]}else{c=[anzovinmod.AsyncRequestObject.REQUEST_OBJECT_XMLHTTPREQUEST]}for(var b=0;b<c.length;++b){var d=c[b];anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.AsyncRequestObject._makeRequestObject","making a ",d," request object");switch(d){case anzovinmod.AsyncRequestObject.REQUEST_OBJECT_XMLHTTPREQUEST:this._requestObject=new XMLHttpRequest();this._requestObjectType=d;break;case anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MSXML2_XMLHTTP:try{this._requestObject=new ActiveXObject("Msxml2.XMLHTTP");this._requestObjectType=d}catch(f){this._requestObject=null;anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.AsyncRequestObject._makeRequestObject","cannot make request object: ",f)}break;case anzovinmod.AsyncRequestObject.REQUEST_OBJECT_ACTIVEXOBJECT_MICROSOFT_XMLHTTP:try{this._requestObject=new ActiveXObject("Microsoft.XMLHTTP");this._requestObjectType=d}catch(f){this._requestObject=null;anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.AsyncRequestObject._makeRequestObject","cannot make request object: ",f)}break;default:anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.AsyncRequestObject._makeRequestObject","unknown request object type, skipping");break}if(this._requestObject!=null){break}}if(this._requestObject==null){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.AsyncRequestObject._makeRequestObject","could not create request object");return}this._requestObject.open(this._type,this._url,true);this._requestObject.onreadystatechange=anzovinmod.Utilities.bind(this,this._requestObjectStateChangeCallback);for(var b=0;b<this._setRequestHeaders.length;++b){var a=this._setRequestHeaders[b];this._requestObject.setRequestHeader(a[0],a[1])}};anzovinmod.AsyncRequestObject.prototype._requestObjectStateChangeCallback=function(){if(this._onStateChangeCallback!=null){this._onStateChangeCallback(this)}if(this.isDone()){if(this.isSuccess()){if(this._onSuccessCallback!=null){this._onSuccessCallback(this)}}else{if(this._onFailCallback!=null){this._onFailCallback(this)}}}};anzovinmod.AsyncRequestObject.prototype.isSuccess=function(){if(!this._requestSent){return false}var b=this._requestObject.readyState;var a=this._requestObject.status;if(b==4){if(a==200){return true}}return false};anzovinmod.AsyncRequestObject.prototype.isGood=function(){if(!this._requestSent){return false}var b=this._requestObject.readyState;var a=this._requestObject.status;if(b==2||b==3||b==4){if(a==200){return true}}return false};anzovinmod.AsyncRequestObject.prototype.isDone=function(){if(!this._requestSent){return false}var a=this._requestObject.readyState;return(a==0||a==4)};anzovinmod.AsyncRequestObject.prototype.getResponseData=function(){if(this.isDone()){return this._requestObject.responseText}return null};anzovinmod.AsyncRequestObject.prototype.send=function(a){if(this._requestSent){this._requestObject.abort()}this._requestSent=true;a=anzovinmod.Utilities.defaultParam(a,null);this._requestObject.send(a)};anzovinmod.AsyncRequestObject.prototype.setRequestHeader=function(b,a){this._requestObject.setRequestHeader(b,a);this._setRequestHeaders.push([b,a])};anzovinmod.AsyncRequestObject.prototype.getReadyState=function(){return this._requestObject.readyState};anzovinmod.AsyncRequestObject.prototype.getStatusCode=function(){return this._requestObject.status};anzovinmod.AsyncRequestObject.prototype.getStatusText=function(){return this._requestObject.statusText};anzovinmod.AsyncRequestObject.prototype._timeoutSend=function(){this._send()};anzovinmod.AsyncRequestObject._blankFunction=function(){}}());
/*! SelfAdjustingTicker.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.SelfAdjustingTicker=function(){this._timer=null;this._fps=null;this._callback=null;this._tickStatistics=null;this._lastTick=null;this._startTime=null;this._tickCount=0;this._recommendedFrameskip=0};anzovinmod.SelfAdjustingTicker.prototype.getFPS=function(){return this._fps};anzovinmod.SelfAdjustingTicker.prototype.setFPS=function(a){if(this._timer!=null){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.SelfAdjustingTicker.setFPS","cannot set tick FPS while ticker is running, stop ticker first");return}if(a<=0){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARNING,"anzovinmod.SelfAdjustingTicker.setFPS","cannot set tick FPS to a value that is not > 0, tick FPS not set");return}this._fps=a};anzovinmod.SelfAdjustingTicker.prototype.setCallback=function(a){a=anzovinmod.Utilities.defaultParam(a,null);this._callback=a};anzovinmod.SelfAdjustingTicker.prototype.isStarted=function(){return this._timer!=null};anzovinmod.SelfAdjustingTicker.prototype.start=function(){if(this._timer!=null){return}if(this._fps==null){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.SelfAdjustingTicker.start","cannot start ticker without a defined framerate");return}var a=1000/this._fps;this._recommendedFrameskip=0;this._tickCount=0;this._lastTick=new Date().getTime();this._startTime=this._lastTick;this._tickStatistics=new anzovinmod.SimpleMovingArray();this._tickStatistics.setSize(this._fps*1);this._timer=setTimeout(anzovinmod.Utilities.bind(this,this._onTick),a);anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.SelfAdjustingTicker.start","started ticker at ",this._fps," fps and tick time of ",a," ms")};anzovinmod.SelfAdjustingTicker.prototype.stop=function(){if(this._timer==null){return}clearTimeout(this._timer);this._timer=null};anzovinmod.SelfAdjustingTicker.prototype._onTick=function(){var b=new Date().getTime();var f=b-this._lastTick;this._tickStatistics.addData(f);this._lastTick=b;this._tickCount++;var e=1000/this._fps;var a=(b-this._startTime)/e;var d=a-this._tickCount;var c=((-d)+1)*e;if(c<1){c=1}this._timer=setTimeout(anzovinmod.Utilities.bind(this,this._onTick),c);if(d>=1){this._recommendedFrameskip=d}else{this._recommendedFrameskip=0}if(this._callback!=null){this._callback(this._recommendedFrameskip)}};anzovinmod.SelfAdjustingTicker.prototype.skippedFrame=function(){this._tickCount++};anzovinmod.SelfAdjustingTicker.prototype.skippedFrames=function(a){anzovinmod.Utilities.defaultParam(a,1,true);if(!(a>0)){return}this._tickCount+=a};anzovinmod.SelfAdjustingTicker.prototype.getCurrentFrameOffsetTimeFromNow=function(){var b=new Date().getTime();var c=1000/this._fps;var a=b-this._startTime-(c*this._tickCount);if(a<0){a=0}return a};anzovinmod.SelfAdjustingTicker.prototype.getMeasuredFPS=function(){if(this._tickStatistics!=null){var a=this._tickStatistics.calculateAverage();return(a==0?0:1000/a)}return 0}}());
/*! SimpleMovingArray.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.SimpleMovingArray=function(){this._arraySize=10;this._arrayData=new Array(10);this._arrayDataWrite=0;this._arrayPointerHasLooped=false};anzovinmod.SimpleMovingArray.prototype.setSize=function(d){d=anzovinmod.Utilities.defaultParam(d,null);if(d==null||d<=0){return}if(!this._arrayPointerHasLooped&&this._arrayDataWrite==0){this._arraySize=d;this._arrayData=new Array(d);return}var a=new Array(d);var e=this._getSCPc1c2(d);var b=0;for(var c=0;c<e[1];++c){a[b++]=this._arrayData[c+e[0]]}for(var c=0;c<e[2];++c){a[b++]=this._arrayData[c]}this._arrayData=a;this._arraySize=d;this._arrayDataWrite=b;this._arrayPointerHasLooped=false;if(b==d){this._arrayDataWrite=0;this._arrayPointerHasLooped=true}};anzovinmod.SimpleMovingArray.prototype.addData=function(a){this._arrayData[this._arrayDataWrite++]=a;if(this._arrayDataWrite==this._arraySize){this._arrayPointerHasLooped=true;this._arrayDataWrite=0}};anzovinmod.SimpleMovingArray.prototype.calculateAverage=function(b){b=anzovinmod.Utilities.defaultParam(b,null);if(b==null){b=this._arraySize}var a=0;var d=this._getSCPc1c2(b);for(var c=0;c<d[1];++c){a+=this._arrayData[c+d[0]]}for(var c=0;c<d[2];++c){a+=this._arrayData[c]}if(this._arrayPointerHasLooped){return a/this._arraySize}else{if(this._arrayDataWrite>0){return a/this._arrayDataWrite}}return 0};anzovinmod.SimpleMovingArray.prototype._getSCPc1c2=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){a=this._arraySize}var b=0;var c=0;var d=0;if(!this._arrayPointerHasLooped){c=this._arrayDataWrite;if(a<this._arraySize&&this._arrayDataWrite>a){b=this._arrayDataWrite-a;c=this._arrayDataWrite-b}}else{b=this._arrayDataWrite;c=this._arraySize-this._arrayDataWrite;d=this._arrayDataWrite;if(a<this._arraySize){b=this._arraySize+this._arrayDataWrite-a;if(b>this._arraySize){b-=this._arraySize}c=a;d=0;if(b+a>this._arraySize){c=this._arraySize-b;d=a-c}}}return[b,c,d]}}());
/*! Utilities.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.Utilities=function(){throw"cannot instantiate anzovinmod.Utilities"};anzovinmod.Utilities.CreateJSObjects={};anzovinmod.Utilities.CreateJSObjects.MovieClip={defaultInstance:(typeof createjs!=="undefined"?new createjs.MovieClip():null),nonObjectAttributes:["tweenjs_count","_off","_anzovinmod"]};anzovinmod.Utilities.CreateJSObjects.Container={defaultInstance:(typeof createjs!=="undefined"?new createjs.Container():null),nonObjectAttributes:["tweenjs_count","_off","_anzovinmod"]};anzovinmod.Utilities.listChildDisplayObjectProperties=function(d){d=anzovinmod.Utilities.defaultParam(d,null);var b=[];if(d==null){return b}var a=null;if(typeof createjs!=="undefined"&&d instanceof createjs.MovieClip){a=anzovinmod.Utilities.CreateJSObjects.MovieClip}else{if(typeof createjs!=="undefined"&&d instanceof createjs.Container){a=anzovinmod.Utilities.CreateJSObjects.Container}}if(a!=null){for(var c in d){if(!d.hasOwnProperty(c)){continue}if(a.defaultInstance.hasOwnProperty(c)){continue}if(c in a.defaultInstance){continue}if(a.nonObjectAttributes.indexOf(c)!=-1){continue}if(typeof d[c]==="function"){continue}b.push(c)}}return b};anzovinmod.Utilities.bind=function(b,a){return function(){a.apply(b,arguments)}};anzovinmod.Utilities.defaultParam=function(a,c,b){if(b!==true){return(typeof(a)=="undefined"?c:a)}else{return(typeof(a)=="undefined"?c:(a===null?c:a))}};anzovinmod.Utilities.cloneArray=function(d,b,e){b=anzovinmod.Utilities.defaultParam(b,false,true);e=anzovinmod.Utilities.defaultParam(e,null);if(d instanceof Array){var c=[];var a=d.length;if(e!=null){if(e>=0&&e<=d.length){a=e}}if(b){while(a--){c[a]=anzovinmod.Utilities.cloneObject(d[a],b)}}else{while(a--){c[a]=d[a]}}return c}return null};anzovinmod.Utilities.cloneObject=function(d,a){a=anzovinmod.Utilities.defaultParam(a,false,true);if(d==null){return d}if(d instanceof Array){return anzovinmod.Utilities.cloneArray(d,a)}if(d instanceof Object){var b={};if(a){for(var c in d){if(!d.hasOwnProperty(c)){continue}b[c]=anzovinmod.Utilities.cloneObject(d[c],a)}}else{for(var c in d){if(!d.hasOwnProperty(c)){continue}b[c]=d[c]}}return b}return d};anzovinmod.Utilities.pnt=function(a,b){b=anzovinmod.Utilities.defaultParam(b,5);if(b==0){return"..."}if(typeof(a)==="undefined"){return"UNDEFINED"}else{if(a===null){return"NULL"}else{if(a instanceof Array){var d="[";for(var c=0;c<a.length;++c){if(c!=0){d+=","}d+=anzovinmod.Utilities.pnt(a[c],b-1)}d+="]";return d}else{if(a instanceof Object&&typeof(a)=="object"){if(!(a&&a.constructor&&a.constructor.name&&a.constructor.name=="Object")){return a.toString()}var d=(a&&a.constructor?a.constructor.name:"");if(d==null||d==""){d="unknown"}d+="{";var e=0;for(var c in a){if(!a.hasOwnProperty(c)){continue}if(e!=0){d+=","}d+=c+":"+anzovinmod.Utilities.pnt(a[c],b-1);++e}d+="}";return d}}}}return a.toString()};anzovinmod.Utilities.cssTransformMatrix2D=function(a){return"matrix("+a.a+","+a.b+","+a.c+","+a.d+","+a.tx+"px,"+a.ty+"px)"};anzovinmod.Utilities.getWindowSize=function(){var a={visibility:document.body.style.visibility,overflow:document.body.style.overflow};document.body.style.visibility="hidden";document.body.style.overflow="hidden";var b={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};document.body.style.visibility=a.visibility;document.body.style.overflow=a.overflow;return b};anzovinmod.Utilities.simplifyPotentialResizeValues=function(m,b,o){m=anzovinmod.Utilities.defaultParam(m,null);b=anzovinmod.Utilities.defaultParam(b,null);o=anzovinmod.Utilities.defaultParam(o,null);if(m==null||b==null||o==null){return null}if(b=="window"||o=="window"){var l=anzovinmod.Utilities.getWindowSize();if(b=="window"){b=l.width}if(o=="window"){o=l.height}}var a=false;var k=false;if(typeof(b)=="string"&&b.substr(b.length-1,1)=="%"){a=true}if(typeof(o)=="string"&&o.substr(o.length-1,1)=="%"){k=true}if(a||k){var f=[];for(var e=0;e<m.children.length;++e){var c=m.children[e];if(c&&c.style&&c.style.display){f.push({i:e,d:c.style.display});c.style.display="none !important"}}var n=m.clientWidth;var g=m.clientHeight;for(var e=0;e<f.length;++e){var d=f[e];m.children[d.i].style.display=d.d}if(a){var h=parseFloat(b);if(isNaN(h)){h=100}b=n*h/100}if(k){var h=parseFloat(o);if(isNaN(h)){h=100}o=g*h/100}}return{width:b,height:o}};anzovinmod.Utilities.calculateBoundScale=function(b,h,e,d,f){b=anzovinmod.Utilities.defaultParam(b,null);h=anzovinmod.Utilities.defaultParam(h,null);e=anzovinmod.Utilities.defaultParam(e,null);d=anzovinmod.Utilities.defaultParam(d,null);f=anzovinmod.Utilities.defaultParam(f,{},true);if(b==null||h==null||e==null||d==null){return 0}if(!f.hasOwnProperty("canScaleUp")){f.canScaleUp=true}if(!f.hasOwnProperty("canScaleDown")){f.canScaleDown=true}if(e==0||d==0){return 0}var g=b/e;var c=h/d;var a=(c>g?g:c);if(!f.canScaleUp&&a>1){a=1}if(!f.canScaleDown&&a<1){a=1}return a};anzovinmod.Utilities.removeStringComponent=function(e,b,a){e=anzovinmod.Utilities.defaultParam(e,"",true);b=anzovinmod.Utilities.defaultParam(b,"",true);a=anzovinmod.Utilities.defaultParam(a," ",true);if(e==""){return""}if(b==""){return e}var d=e.split(a);for(var c=0;c<d.length;++c){if(d[c]==b){d.splice(c,1);--c}}return d.join(a)};anzovinmod.Utilities.addStringComponent=function(e,b,a){e=anzovinmod.Utilities.defaultParam(e,"",true);b=anzovinmod.Utilities.defaultParam(b,"",true);a=anzovinmod.Utilities.defaultParam(a," ",true);if(b==""){return e}var d=e.split(a);for(var c=0;c<d.length;++c){if(d[c]==b){return e}}d.push(b);return d.join(a)};anzovinmod.Utilities.hasStringComponent=function(e,b,a){e=anzovinmod.Utilities.defaultParam(e,"",true);b=anzovinmod.Utilities.defaultParam(b,"",true);a=anzovinmod.Utilities.defaultParam(a," ",true);if(e==""||b==""){return false}var d=e.split(a);for(var c=0;c<d.length;++c){if(d[c]==b){return true}}return false};anzovinmod.Utilities.setDomElementProperty=function(c,a,f){c=anzovinmod.Utilities.defaultParam(c,null);a=anzovinmod.Utilities.defaultParam(a,null);if(c==null||a==null){return}if(!anzovinmod.Utilities.IsIE8()){c[a]=f;return}var e=anzovinmod.Utilities._DomElementProperties;for(var b=0;b<e.length;++b){if(e[b]["elem"]==c){e[b]["props"][a]=f;return}}var d={elem:c,props:{}};d.props[a]=f;e.push(d)};anzovinmod.Utilities.getDomElementProperty=function(c,a){c=anzovinmod.Utilities.defaultParam(c,null);a=anzovinmod.Utilities.defaultParam(a,null);if(c==null||a==null){return}if(!anzovinmod.Utilities.IsIE8()){return c[a]}var d=anzovinmod.Utilities._DomElementProperties;for(var b=0;b<d.length;++b){if(d[b]["elem"]==c){return d[b]["props"][a]}}return};anzovinmod.Utilities.clearDomElementProperties=function(b){b=anzovinmod.Utilities.defaultParam(b,null);if(b==null){return}if(!anzovinmod.Utilities.IsIE8()){return}var c=anzovinmod.Utilities._DomElementProperties;for(var a=0;a<c.length;++a){if(c[a]["elem"]==b){c.splice(a,1);return}}};anzovinmod.Utilities._DomElementProperties=[];anzovinmod.Utilities.IsIE8=function(){return anzovinmod&&anzovinmod.instance&&anzovinmod.instance.IsIE8};anzovinmod.Utilities.IsIE9=function(){return anzovinmod&&anzovinmod.instance&&anzovinmod.instance.IsIE9}}());
/*! Logging.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.Logging=function(){throw"cannot instantiate anzovinmod.Logging"};anzovinmod.Logging._LogLevel=4;anzovinmod.Logging.LOG_ERROR=0;anzovinmod.Logging.LOG_WARN=1;anzovinmod.Logging.LOG_NOTICE=2;anzovinmod.Logging.LOG_INFO=3;anzovinmod.Logging.LOG_DEBUG=4;anzovinmod.Logging.LOG_TRACE=5;anzovinmod.Logging.LOG_TRACE_1=5;anzovinmod.Logging.LOG_TRACE_2=6;anzovinmod.Logging.LOG_TRACE_3=7;anzovinmod.Logging.LOG_TRACE_4=8;anzovinmod.Logging.LOG_TRACE_5=9;anzovinmod.Logging.LOG_TRACE_6=10;anzovinmod.Logging.LOG_TRACE_7=11;anzovinmod.Logging.LOG_TRACE_8=12;anzovinmod.Logging.LOG_TRACE_9=13;anzovinmod.Logging.MAX_LOG_LEVEL=13;anzovinmod.Logging.canLog=function(a){return !(a>anzovinmod.Logging._LogLevel)};anzovinmod.Logging._getLogLevelString=function(a){if(typeof(a)!="number"){a=-1}if(a>anzovinmod.Logging.MAX_LOG_LEVEL){a=-1}if(a<0){a=-1}a=parseInt(a);switch(a){case -1:return"INVALID--- ";case anzovinmod.Logging.LOG_ERROR:return"error----- ";case anzovinmod.Logging.LOG_WARN:return"-warn----- ";case anzovinmod.Logging.LOG_NOTICE:return"--notice-- ";case anzovinmod.Logging.LOG_INFO:return"---info--- ";case anzovinmod.Logging.LOG_DEBUG:return"----debug- ";default:return"-----trace "}return"INVALID--- "};anzovinmod.Logging.logit=function(b){if(arguments.length<=1){return false}if(typeof console==="undefined"){return false}if(b>anzovinmod.Logging._LogLevel){return false}var a=anzovinmod.Logging._getLogLevelString(b);a+=": ";for(var c=1;c<arguments.length;++c){a+=anzovinmod.Utilities.pnt(arguments[c])}console.log(a);return true};anzovinmod.Logging.logm=function(c,a){if(arguments.length<=2){return false}if(typeof console==="undefined"){return false}if(c>anzovinmod.Logging._LogLevel){return false}var b=anzovinmod.Logging._getLogLevelString(c);b+=": "+a+"() ";for(var d=2;d<arguments.length;++d){b+=anzovinmod.Utilities.pnt(arguments[d])}console.log(b);return true};anzovinmod.Logging.logo=function(a){if(arguments.length<=1){return false}if(typeof console==="undefined"){return false}if(a>anzovinmod.Logging._LogLevel){return false}for(var b=1;b<arguments.length;++b){console.log(arguments[b])}return true};anzovinmod.Logging.setLogLevel=function(a){anzovinmod.Logging._LogLevel=a};anzovinmod.Logging.getLogLevel=function(){return anzovinmod.Logging._LogLevel}}());
/*! MainTimeline_Sound.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.MainTimeline_Sound=function(a){this._mtl=a;this._pausedSounds=[]};anzovinmod.MainTimeline_Sound.prototype.playSoundConfig=function(e,a){e=anzovinmod.Utilities.defaultParam(e,null);if(e==null){return}a=anzovinmod.Utilities.defaultParam(a,{},true);if(!a.hasOwnProperty("offset")){a.offset=0}if(!a.hasOwnProperty("addTickerTimeOffset")){a.addTickerTimeOffset=true}if(!a.hasOwnProperty("startPaused")){a.startPaused=false}var d=a.offset;if(a.addTickerTimeOffset){d+=this._mtl._ticker.getCurrentFrameOffsetTimeFromNow()}if(d<0){d=0}var c=this._mtl._mtl_scenes.getSoundAudioManifest(e);if(c!=null){if(d>=c.duration*1000){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Sound.playSoundConfig","not playing sound, offset >= duration: ",e," with final offset: ",d);return}}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Sound.playSoundConfig","playing sound: ",e," with final offset: ",d);var b=createjs.Sound.play(e,{interrupt:createjs.Sound.INTERRUPT_NONE,offset:d,volume:(a.startPaused?0:1)});if(b.playState!=createjs.Sound.PLAY_SUCCEEDED){if(b.hasOwnProperty("duration")&&b.duration!=null){if(d>b.duration){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Sound.playSoundConfig","sound did not play, but offset > length so this is likely normal: ",b.playState," ",b)}else{anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Sound.playSoundConfig","sound did not play, but offset < duration: ",b.playState," ",b)}}else{anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Sound.playSoundConfig","sound did not play, but cannot tell sound duration: ",b.playState," ",b)}}else{if(a.startPaused){b.pause();this._pausedSounds.push(b);b.volume=1}}};anzovinmod.MainTimeline_Sound.prototype.clearPausedSounds=function(){for(var a=0;a<this._pausedSounds.length;++a){this._pausedSounds[a].stop()}this._pausedSounds=[]};anzovinmod.MainTimeline_Sound.prototype.pauseSounds=function(){for(var b=0;b<createjs.Sound._instances.length;++b){var a=createjs.Sound._instances[b];if(a.paused==false){a.pause();this._pausedSounds.push(a)}}};anzovinmod.MainTimeline_Sound.prototype.resumeSounds=function(){for(var b=0;b<this._pausedSounds.length;++b){var a=this._pausedSounds[b];a.resume()}this._pausedSounds=[]};anzovinmod.MainTimeline_Sound.prototype.startPlaythroughNodeSoundsPaused=function(h,d,a){if(d.length==0){return}var c=d[d.length-1];var l=1000/this._mtl.getFPS();for(var k=0;k<a.length;++k){var m=a[k];var e=false;var g=0;do{if(m.node==c.name){if(m.nodeFrame<=h){e=true;g+=l*(h-m.nodeFrame)}break}for(var f=0;f<d.length-1;++f){var b=d[f];if(m.node==b.name){e=true;g+=l*(b.length-m.nodeFrame);continue}if(e){g+=l*b.length}}}while(false);if(e){this.playSoundConfig(m.id,{offset:g,startPaused:true,addTickerTimeOffset:false})}}};anzovinmod.MainTimeline_Sound.prototype.startPlayingCurrentNodeSounds=function(d,e,c){for(var b=0;b<c.length;++b){var a=c[b];if(!(a.node==e)){continue}if(!(a.nodeFrame==d)){continue}this.playSoundConfig(a.id,{})}};anzovinmod.MainTimeline_Sound.prototype.setVolume=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}if(typeof createjs!=="undefined"){createjs.Sound.setVolume(a)}};anzovinmod.MainTimeline_Sound.prototype.setMute=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}if(typeof createjs!=="undefined"){createjs.Sound.setMute(a)}};anzovinmod.MainTimeline_Sound.prototype.stopAllSounds=function(){createjs.Sound.stop()}}());
/*! MainTimeline_State.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.MainTimeline_State=function(a){this._mtl=a;this._states={bare:true,unloaded:false,manifestloading:false,manifestloaded:false,loading:false,loaded:false,started:false,playing:false,ended:false,hardpaused:false};this._stateChangeCallbacks=[]};anzovinmod.MainTimeline_State.prototype.isState=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return false}return this._states.hasOwnProperty(a)&&this._states[a]};anzovinmod.MainTimeline_State.prototype.setState=function(c,b,a){c=anzovinmod.Utilities.defaultParam(c,null);b=anzovinmod.Utilities.defaultParam(b,true,true);a=anzovinmod.Utilities.defaultParam(a,true,true);if(c==null){return}if(!this._setState(c,b)){return}if(a){this._sendStateChangeCallbacks([c])}};anzovinmod.MainTimeline_State.prototype.setStates=function(c,a){c=anzovinmod.Utilities.defaultParam(c,null);a=anzovinmod.Utilities.defaultParam(a,true,true);if(c==null){return}var d=[];for(var b in c){if(!c.hasOwnProperty(b)){continue}if(!this._setState(b,c[b])){continue}d.push(b)}if(d.length>0&&a){this._sendStateChangeCallbacks(d)}};anzovinmod.MainTimeline_State.prototype._setState=function(b,a){if(this._states.hasOwnProperty(b)){if(this._states[b]==a){return false}}else{if(!a){return false}}this._states[b]=a;anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_State._setState","state '",b,"' set to ",a);return true};anzovinmod.MainTimeline_State.prototype._sendStateChangeCallbacks=function(a){for(var b=0;b<this._stateChangeCallbacks.length;++b){this._stateChangeCallbacks[b](a)}};anzovinmod.MainTimeline_State.prototype.addStateChangeCallback=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}this._stateChangeCallbacks.push(a)}}());
/*! MainTimeline_Vars.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.MainTimeline_Vars=function(a){this._mtl=a;this._vars={};this._varChangeCallbacks={}};anzovinmod.MainTimeline_Vars.prototype.hasVar=function(a){return this._vars.hasOwnProperty(a)};anzovinmod.MainTimeline_Vars.prototype.getVar=function(a,b){b=anzovinmod.Utilities.defaultParam(b,null);if(this._vars.hasOwnProperty(a)){return this._vars[a]}return b};anzovinmod.MainTimeline_Vars.prototype.setVar=function(c,b,a){a=anzovinmod.Utilities.defaultParam(a,true);anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Vars.setVar","setting variable '",c,"' to value '",b,"' with callbacks '",a,"'");this._vars[c]=b;if(a){if(this._varChangeCallbacks.hasOwnProperty(c)){for(var e=0;e<this._varChangeCallbacks[c].length;++e){var g=this._varChangeCallbacks[c][e];if(g.names!=null){var f=this._mtl.findChildren(g.names,true);for(var d=0;d<f.length;++d){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.MainTimeline_Vars.setVar","found match for object '",f[d].name,"', applying callback");g.callback(this._mtl,f[d])}}else{anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.MainTimeline_Vars.setVar","applying callback for var change solo");g.callback(this._mtl)}}}}};anzovinmod.MainTimeline_Vars.prototype.registerCallback=function(b,h,g,a,c){a=anzovinmod.Utilities.defaultParam(a,true);c=anzovinmod.Utilities.defaultParam(c,true);anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Vars.registerCallback","adding callback of var '",b,"' for objects '",h,"' for variable changes '",a,"' applying now '",c,"'");if(a){if(!this._varChangeCallbacks.hasOwnProperty(b)){this._varChangeCallbacks[b]=[]}this._varChangeCallbacks[b].push({names:h,callback:g})}if(c){if(h!=null){var e=this._mtl.findChildren(h,true);for(var d=0;d<e.length;++d){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.MainTimeline_Vars.registerCallback","found match for object '",e[d].name,"', applying callback");g(this._mtl,e[d])}}else{anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.MainTimeline_Vars.registerCallback","applying callback for var change solo");g(this._mtl)}}};anzovinmod.MainTimeline_Vars.prototype.applyCallback=function(b,a){this.registerCallback(null,b,a,false,true)}}());
/*! MainTimeline_Scenes.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.MainTimeline_Scenes=function(a){this._mtl=a;this._scenes={};this._sceneOrder=[];this._currentScene=-1;this._mainLoader=new createjs.LoadQueue(false);this._mainLoaderCache={};this._progressNodes={};this._soundsAtNodes=[];this._haveSetCanvasSize=false;this._mainLoader.installPlugin(createjs.Sound);this._mainLoader.addEventListener("fileload",anzovinmod.Utilities.bind(this,this._manifestFileLoadedCallback));this._mainLoader.addEventListener("complete",anzovinmod.Utilities.bind(this,this._loaderCompleteCallback));this._mainLoader.setMaxConnections(5)};anzovinmod.MainTimeline_Scenes.prototype.isLateLoadFinished=function(){for(var a in this._scenes){if(!this._scenes.hasOwnProperty(a)){continue}if(!this._scenes[a]["_anzovinmod"]["lateLoaded"]){return false}}return true};anzovinmod.MainTimeline_Scenes.prototype.lateLoadComplete=function(a){if(a!=null&&a.hasOwnProperty("_anzovinmod")){a._anzovinmod["lateLoaded"]=true}this._mtl._mtl_stage.checkLoadStage()};anzovinmod.MainTimeline_Scenes.prototype._manifestFileLoadedCallback=function(a){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Scenes._manifestFileLoadedCallback","event 'fileload' caught for ",a.item.id);delete this._mainLoaderCache[a.item.id];for(var d=0;d<this._sceneOrder.length;++d){var e=this._sceneOrder[d];if(!anzovinmod.instance.Scenes.hasOwnProperty(e)){break}var c=anzovinmod.instance.Scenes[e];if(!c.manifest.hasOwnProperty(a.item.id)){for(var b=0;b<c.properties["manifest"].length;++b){if(c.properties["manifest"][b]["id"]==a.item.id){c.manifest[a.item.id]=a.result;c.properties["manifest"][b]=a.item;break}}}}};anzovinmod.MainTimeline_Scenes.prototype.getSoundAudioManifest=function(d){for(var b=0;b<this._sceneOrder.length;++b){var c=this._sceneOrder[b];if(!anzovinmod.instance.Scenes.hasOwnProperty(c)){break}var a=anzovinmod.instance.Scenes[c];if(!a.manifest.hasOwnProperty(d)){break}return a.manifest[d]}return null};anzovinmod.MainTimeline_Scenes.prototype._loaderCompleteCallback=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Scenes._loaderCompleteCallback","loader has called 'complete'");this._mtl.setStates({manifestloading:false,manifestloaded:true})};anzovinmod.MainTimeline_Scenes.prototype.loadMainLoader=function(){this._mainLoader.load()};anzovinmod.MainTimeline_Scenes.prototype.attachScene=function(b){b=anzovinmod.Utilities.defaultParam(b,null);if(b==null){return}anzovinmod.Logging.logit(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Scenes.attachScene() attaching scene '",b,"'");for(var c=0;c<this._sceneOrder.length;++c){if(this._sceneOrder[c]==b){anzovinmod.Logging.logit(anzovinmod.Logging.LOG_WARN,"anzovinmod.MainTimeline_Scenes.attachScene() cannot add a scene with the same name as an already added scene");return}}this._sceneOrder.push(b);var d=anzovinmod.instance.Scenes[b];this._attachScene_handleNodes(d);var a=d.properties;if(!a.hasOwnProperty("noAnimatedText")){a.noAnimatedText=false}this._attachScene_loadManifest(d);if(!this._haveSetCanvasSize){this._haveSetCanvasSize=true;this._mtl.setCanvasSize(a.width,a.height);this._mtl.triggerResize()}if(this._mtl.isState("bare")){this._mtl.setStates({bare:false,unloaded:true})}};anzovinmod.MainTimeline_Scenes.prototype._attachScene_handleNodes=function(f){var c=f.properties;if(!c.hasOwnProperty("soundsAtNodes")){c.soundsAtNodes=[]}if(!c.hasOwnProperty("progressNodes")){c.progressNodes={}}for(var b=0;b<c.soundsAtNodes.length;++b){var d=c.soundsAtNodes[b];if(!d.hasOwnProperty("loop")){d.loop=0}}for(var a in c.progressNodes){if(!c.progressNodes.hasOwnProperty(a)){continue}var d=c.progressNodes[a];if(!d.hasOwnProperty("nextNode")){d.nextNode=null}}this._addProgressNodes(c.progressNodes);this._addSoundsAtNodes(c.soundsAtNodes)};anzovinmod.MainTimeline_Scenes.prototype._attachScene_loadManifest=function(f){var k=f.properties;var b=k.name;var o=k.manifest;var l=f.manifest;var a=[];manifestLoop:for(var e=0;e<o.length;++e){var m=o[e];if(l.hasOwnProperty(m.id)){continue manifestLoop}for(var d=0;d<a.length;++d){if(a[d]["id"]==m.id){continue manifestLoop}}if(this._mainLoaderCache.hasOwnProperty(m.id)){continue manifestLoop}for(var c in anzovinmod.instance.Scenes){if(!anzovinmod.instance.Scenes.hasOwnProperty(c)){continue}if(c==b){continue}var g=anzovinmod.instance.Scenes[c];var h=g.manifest;if(h.hasOwnProperty(m.id)){var n=g.properties["manifest"];for(var d=0;d<n.length;++d){if(n[d]["id"]==m.id){l[m.id]=h[m.id];o[e]=n[d];continue manifestLoop}}}}a.push(m)}if(a.length>0){for(var e=0;e<a.length;++e){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Scenes._attachScene_loadManifest","adding manifest entry: ",a[e].id);this._mainLoaderCache[a[e]["id"]]=a[e]}this._mainLoader.loadManifest(a,false)}};anzovinmod.MainTimeline_Scenes.prototype.initializeScenes=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Scenes.initializeScenes","loading all stage scenes");for(var c=0;c<this._sceneOrder.length;++c){var b=this._sceneOrder[c];var a=anzovinmod.instance.Scenes[b];if(a.instance.make){var d=this._initializeScenes_createScene(b);this._scenes[b]=d;if(c==0){this._currentScene=0}else{d.stop();d.visible=false}}else{a.loadedCallbacks.push(anzovinmod.Utilities.bind(this,this._initializeLoadedScene))}}};anzovinmod.MainTimeline_Scenes.prototype._initializeLoadedScene=function(a){breaker:do{for(var b=0;b<this._sceneOrder.length;++b){if(this._sceneOrder[b]==a){var c=this._initializeScenes_createScene(a);this._scenes[a]=c;if(b==0){this._currentScene=0}else{c.stop();c.visible=false}break breaker}}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.MainTImeline_Scenes._initializeLoadedScene","unhandled scene loaded: ",a)}while(false);this._mtl.checkLoadStage()};anzovinmod.MainTimeline_Scenes.prototype._initializeScenes_createScene=function(a){var b=new anzovinmod.instance.Scenes[a]["instance"].make(this._mtl);b.name=a;b._anzovinmod={instance:anzovinmod.instance.Scenes[a]["instance"],properties:anzovinmod.instance.Scenes[a]["properties"],name:a,textAdjustmentsFinal:false,isMovieclip:true,tickedLastUpdate:false,drawnLastUpdate:false,buttonHelpers:null,lateLoaded:false};if(!(b instanceof createjs.MovieClip)){b.gotoAndStop=function(){this.stop()};b.gotoAndPlay=function(){this.play()};b.stop=function(){this.paused=true};b.play=function(){this.paused=false};b.paused=false;b._anzovinmod.isMovieclip=false}return b};anzovinmod.MainTimeline_Scenes.prototype._initializeScenes_listButtonHelpers=function(e){e=anzovinmod.Utilities.defaultParam(e,null);if(e==null){return}if(e._anzovinmod.buttonHelpers!=null){return}var d=anzovinmod.TimelineFindChildren.findChildren(e.name+".**.*",e,this._mtl,true);var c=[];for(var b=0;b<d.length;++b){var a=d[b];if(!a.hasOwnProperty("_anzovinmod")){continue}if(!a._anzovinmod.hasOwnProperty("isButtonHelper")){continue}if(!a._anzovinmod.isButtonHelper){continue}a._anzovinmod.buttonHelperIsOver=false;c.push(a)}e._anzovinmod.buttonHelpers=c};anzovinmod.MainTimeline_Scenes.prototype.getAndValidateBasicSceneProperties=function(){var a={width:null,height:null,fps:null,color:null};for(var b=0;b<this._sceneOrder.length;++b){var c=anzovinmod.instance.Scenes[this._sceneOrder[b]]["properties"];for(var e in a){if(!a.hasOwnProperty(e)){continue}if(!c.hasOwnProperty(e)){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.MainTimeline_Scenes.getAndValidateBasicSceneProperties","scene does not have '",e,"' property: ",this._sceneOrder[b])}else{if(a[e]==null||a[e]==c[e]){a[e]=c[e]}else{anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.MainTimeline_Scenes.getAndValidateBasicSceneProperties","attached scenes have differing '",e,"' values; only the first scene's value will be used")}}}}var d=["fps","width","height"];for(var b=0;b<d.length;++b){var e=d[b];if(a[e]==null||a[e]<0){anzovinmod.Logging.logit(anzovinmod.Logging.LOG_ERROR,"anzovinmod.MainTimeline_Scenes.getAndValidateBasicSceneProperties","cannot validate parameters on attached scenes, property '",e,"' is null or <0");return null}}return a};anzovinmod.MainTimeline_Scenes.prototype.getCurrentScene=function(){if(this._currentScene<0){return null}if(this._currentScene>=this._sceneOrder.length){return null}return this._scenes[this._sceneOrder[this._currentScene]]};anzovinmod.MainTimeline_Scenes.prototype.getScenes=function(){return this._scenes};anzovinmod.MainTimeline_Scenes.prototype.getLoginButtonConfig=function(){if(this._sceneOrder.length==0){return null}var f=anzovinmod.instance.Scenes[this._sceneOrder[0]]["properties"];if(!f.hasOwnProperty("loginButtonConfig")){return null}var d=null;var g=this._mtl.getReplacementContainer();if(g!=null){var a=f.name+"-MemberContentData";if(g.has(a)){var b={};try{b=JSON.parse(g.get(a))}catch(h){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.Player._mainTimelineStateChangeCallback","cannot json parse ",a,": ",g.get(a))}if(b.hasOwnProperty("EmployerURL")){d=b.EmployerURL}}}var c=anzovinmod.Utilities.cloneObject(f.loginButtonConfig);if(d!=null){c.url=d}return c};anzovinmod.MainTimeline_Scenes.prototype.getProgressNodes=function(){return this._progressNodes};anzovinmod.MainTimeline_Scenes.prototype.getSoundsAtNodes=function(){return this._soundsAtNodes};anzovinmod.MainTimeline_Scenes.prototype._addProgressNodes=function(b){b=anzovinmod.Utilities.defaultParam(b,{},true);for(var a in b){if(!b.hasOwnProperty(a)){continue}this._progressNodes[a]=b[a]}};anzovinmod.MainTimeline_Scenes.prototype._addSoundsAtNodes=function(b){b=anzovinmod.Utilities.defaultParam(b,[],true);for(var a=0;a<b.length;++a){this._soundsAtNodes.push(b[a])}};anzovinmod.MainTimeline_Scenes.prototype.play=function(){if(this._mtl.isState("hardpaused")){return}var a=this.getCurrentScene();if(a==null){return}a.play();this._mtl.resetTickerTimeout()};anzovinmod.MainTimeline_Scenes.prototype.stop=function(){if(this._mtl.isState("hardpaused")){return}var a=this.getCurrentScene();if(a==null){return}a.stop()};anzovinmod.MainTimeline_Scenes.prototype.gotoAndPlay=function(c,b,a){this._gotoAndPlayOrStop(c,b,true,true,false,a)};anzovinmod.MainTimeline_Scenes.prototype.gotoAndStop=function(c,b,a){this._gotoAndPlayOrStop(c,b,false,true,false,a)};anzovinmod.MainTimeline_Scenes.prototype._gotoAndPlayOrStop=function(g,m,b,l,a,c){if(this._mtl.isState("hardpaused")){return}g=anzovinmod.Utilities.defaultParam(g,null);m=anzovinmod.Utilities.defaultParam(m,null);c=anzovinmod.Utilities.defaultParam(c,{},true);anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Scenes._gotoAndPlayOrStop","going to scene '",m,"' frame '",g,"' with playing '",b,"', with updating stage '",l,"' with reset ticker '",a,"'");var e=this.getCurrentScene();if(e==null){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.MainTimeline_Scenes._gotoAndPlayOrStop","current scene not valid");return}if(m!=null&&m==e.name){m=null}if(m==null){if(e instanceof createjs.MovieClip){g=e.timeline.resolve(g)}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Scenes._gotoAndPlayOrStop","going to current scene frame '",g,"'");if(b){e.gotoAndPlay(g)}else{e.gotoAndStop(g)}if(l){c.doTick=false;c.resetTickerTimeout=a;this._mtl._mtl_stage.updateStage(c)}else{if(a){this._mtl.resetTickerTimeout()}}return}var h=-1;for(var d=0;d<this._sceneOrder.length;++d){if(this._sceneOrder[d]==m){h=d;break}}var j=null;if(this._scenes.hasOwnProperty(m)){j=this._scenes[m]}if(h<0||j==null){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.MainTimeline_Scenes._gotoAndPlayOrStop","cannot go to scene/id, not valid: ",h," ",j);return}var k=(this._currentScene!=h);if(j instanceof createjs.MovieClip){g=j.timeline.resolve(g)}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Scenes._gotoAndPlayOrStop","going to scene '",m,"' frame '",g,"'");this._currentScene=h;if(k){oldScene.stop()}if(b){j.gotoAndPlay(g)}else{j.gotoAndStop(g)}if(k){oldScene.visible=false}j.visible=true;if(l){c.doTick=false;c.resetTickerTimeout=a;this._mtl._mtl_stage.updateStage(c)}else{if(a){this._mtl.resetTickerTimeout()}}};anzovinmod.MainTimeline_Scenes.prototype.nextScene=function(){var d=this.getCurrentScene();var a=this._currentScene;var b=a+1;if(b>=this._sceneOrder.length){b=0}var c=null;if(b>=0&&b<this._sceneOrder.length){c=this._scenes[this._sceneOrder[b]]}if(b<0||b>=this._sceneOrder.length||c==null){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.MainTimeline_Scenes.nextScene","scene id or object is not valid: ",b," ",c);return}var e=(a!=newSceneId&&d!=null);this._currentScene=newSceneId;if(e){oldScene.stop()}newScene.gotoAndPlay(0);if(e){this._mtl._textController.hideSceneElements(oldScene.name)}if(e){oldScene.visible=false}newScene.visible=true}}());
/*! MainTimeline_Size.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.MainTimeline_Size=function(a){this._mtl=a;this._calledWidth="window";this._calledHeight="window";this._resizeBehaviors={canScaleUp:true,canScaleDown:true};this._canvasWidth=null;this._canvasHeight=null;this._currentWidth=null;this._currentHeight=null;this._currentCanvasScale=null;this._triggeredCalledWidth=null;this._triggeredCalledHeight=null};anzovinmod.MainTimeline_Size.prototype.resize=function(){var d=this._triggeredCalledWidth;var a=this._triggeredCalledHeight;this._triggeredCalledWidth=null;this._triggeredCalledHeight=null;anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Size.resize","resizing main timeline to called size ",d,"-",a);if(d==null){d=this._calledWidth}if(a==null){a=this._calledHeight}var h=d;var g=a;d=(d!="canvas"?d:(this._canvasWidth!=null?this._canvasWidth:"100%"));a=(a!="canvas"?a:(this._canvasHeight!=null?this._canvasHeight:"100%"));var f=anzovinmod.Utilities.simplifyPotentialResizeValues(this._mtl.getParent(),d,a);if(f==null){return}var c=1;if(this._canvasWidth!=null&&this._canvasHeight!=null){c=anzovinmod.Utilities.calculateBoundScale(f.width,f.height,this._canvasWidth,this._canvasHeight,this._resizeBehaviors)}var b=f.width;var e=f.height;if(this._canvasWidth!=null&&this._canvasHeight!=null){b=this._canvasWidth*c;e=this._canvasHeight*c}this.setSize(h,g,b,e,c)};anzovinmod.MainTimeline_Size.prototype.triggerResize=function(b,a){b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);this._triggeredCalledWidth=b;this._triggeredCalledHeight=a;this._mtl.setState("willresize",true);this._mtl.setState("resize",true)};anzovinmod.MainTimeline_Size.prototype.setSize=function(e,d,a,c,b){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Size.setSize","called(",e,",",d,") display(",a,",",c,") scale(",b,")");e=anzovinmod.Utilities.defaultParam(e,null);d=anzovinmod.Utilities.defaultParam(d,null);a=anzovinmod.Utilities.defaultParam(a,null);c=anzovinmod.Utilities.defaultParam(c,null);b=anzovinmod.Utilities.defaultParam(b,null);if(e==null||d==null){return}this._calledWidth=e;this._calledHeight=d;if(a==null||c==null||b==null){return}this._currentWidth=a;this._currentHeight=c;this._currentCanvasScale=b;this._mtl.setSizeOnTimelineElements(a,c,b)};anzovinmod.MainTimeline_Size.prototype.setCanvasSize=function(b,a){this._canvasWidth=b;this._canvasHeight=a};anzovinmod.MainTimeline_Size.prototype.getCanvasSize=function(){return{width:this._canvasWidth,height:this._canvasHeight}};anzovinmod.MainTimeline_Size.prototype.getResizeBehaviors=function(){return this._resizeBehaviors}}());
/*! MainTimeline_Stage.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.MainTimeline_Stage=function(a){this._mtl=a;this._stage=null;this._doStageLoad=false;this._stageUpdate={disableTick:false,disableDraw:false,currentlyUpdating:false};this._stagePressedObject=null;this._unhandledMouseClickCallbacks=[];this._stage=new createjs.Stage(this._mtl.getCanvas());this._stage.addEventListener("tickstart",anzovinmod.Utilities.bind(this,this._stageUpdateEventListener_tickstart));this._stage.addEventListener("drawstart",anzovinmod.Utilities.bind(this,this._stageUpdateEventListener_drawstart));this._setupClickDetection()};anzovinmod.MainTimeline_Stage.prototype.addUnhandledMouseClickCallback=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}this._unhandledMouseClickCallbacks.push(a)};anzovinmod.MainTimeline_Stage.prototype._setupClickDetection=function(){this._stage.addEventListener("stagemousedown",anzovinmod.Utilities.bind(this,this._stageMouseDownEventCallback));this._stage.addEventListener("stagemouseup",anzovinmod.Utilities.bind(this,this._stageMouseUpEventCallback))};anzovinmod.MainTimeline_Stage.prototype._stageMouseEventResult=function(a,c){if(c==null){for(var b=0;b<this._unhandledMouseClickCallbacks.length;++b){this._unhandledMouseClickCallbacks[b](a)}}};anzovinmod.MainTimeline_Stage.prototype._stageMouseDownEventCallback=function(a){var c=this._stage.scaleX;var b=this._stage.scaleY;if(c==0||b==0){return}this._stagePressedObject=this._stage.getObjectUnderPoint(a.stageX/c,a.stageY/b,2)};anzovinmod.MainTimeline_Stage.prototype._stageMouseUpEventCallback=function(a){var c=this._stage.scaleX;var b=this._stage.scaleY;if(c==0||b==0){this._stageMouseEventResult("null");this._stagePressedObject=null;return}var d=this._stage.getObjectUnderPoint(a.stageX/c,a.stageY/b,2);if(d==this._stagePressedObject){this._stageMouseEventResult(a,d);this._stagePressedObject=null;return}};anzovinmod.MainTimeline_Stage.prototype.startStage=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Stage.startStage","starting the stage loader");this._doStageLoad=true;if(this._mtl.isState("unloaded")&&!this._mtl.isState("loading")&&!this._mtl.isState("loaded")){this._mtl.setState("loading")}if(this._mtl.isState("unloaded")&&!this._mtl.isState("manifestloading")&&!this._mtl.isState("manifestloaded")){this._mtl.setState("manifestloading")}this._mtl._mtl_scenes.initializeScenes();this.checkLoadStage()};anzovinmod.MainTimeline_Stage.prototype.checkLoadStage=function(){if(!this._doStageLoad){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_NOTICE,"anzovinmod.MainTimeline_Stage.checkLoadStage","stage not marked as loadable, either not yet ready to load or already loaded");return}if(!this._mtl.isState("manifestloaded")){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Stage.checkLoadStage","stage still loading assets");return}if(!this._mtl.isLateLoadFinished()){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Stage.checkLoadStage","stage/scene objects still being created");return}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Stage.checkLoadStage","stage ready to complete loading");this._doStageLoad=false;this._loadStageFinalize()};anzovinmod.MainTimeline_Stage.prototype._loadStageFinalize=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Stage._loadStageFinalize","finalizing stage loading");var a=this._mtl.getScenes();for(var b in a){if(!a.hasOwnProperty(b)){continue}var d=a[b];this._stage.addChild(d);anzovinmod.TimelineFindChildren.namifyAllChildren(d);this._mtl._mtl_scenes._initializeScenes_listButtonHelpers(d);this._mtl._textController.initTextNodesFromMtl(this._mtl,d)}var c=this._mtl._mtl_scenes.getAndValidateBasicSceneProperties();if(c==null){return}if(c.color!=null){this._mtl._canvas.style.backgroundColor=c.color}this._mtl._mtl_size.setCanvasSize(c.width,c.height);this._mtl._textController.setSize(c.width,c.height);this._mtl._mtl_size.triggerResize();this._mtl._ticker.setFPS(c.fps);this._mtl._ticker.start();this._mtl.gotoAndStop(0);this.updateStage({doTick:false,resetTickerTimeout:true});if(this._mtl.isState("loading")){this._mtl.setStates({unloaded:false,loading:false,loaded:true})}};anzovinmod.MainTimeline_Stage.prototype._stageUpdateEventListener_tickstart=function(a){if(this._stageUpdate.disableTick){a.preventDefault()}};anzovinmod.MainTimeline_Stage.prototype._stageUpdateEventListener_drawstart=function(a){if(this._stageUpdate.disableDraw){a.preventDefault()}};anzovinmod.MainTimeline_Stage.prototype.updateStage=function(a){a=anzovinmod.Utilities.defaultParam(a,{},true);if(!a.hasOwnProperty("doTick")){a.doTick=true}if(!a.hasOwnProperty("doDraw")){a.doDraw=true}if(!a.hasOwnProperty("resetTickerTimeout")){a.resetTickerTimeout=false}if(!a.hasOwnProperty("checkTextAdjustments")){a.checkTextAdjustments=true}if(!a.hasOwnProperty("doHtmlFrameUpdate")){a.doHtmlFrameUpdate=true}if(!a.hasOwnProperty("checkButtonMouseovers")){a.checkButtonMouseovers=true}if(!a.hasOwnProperty("playSounds")){a.playSounds=true}if(!a.hasOwnProperty("doNodeTracking")){a.doNodeTracking=true}if(!a.hasOwnProperty("doNodeFrameTracking")){a.doNodeFrameTracking=true}var b=this._mtl.getCurrentScene();if(b==null){return}if(this._stageUpdate.currentlyUpdating){return}this._stageUpdate.currentlyUpdating=true;b._anzovinmod.tickedLastUpdate=false;b._anzovinmod.drawnLastUpdate=false;if(a.resetTickerTimeout){this._mtl.resetTickerTimeout()}if(a.doTick){this._updateStage_doTick(b)}if(a.doNodeFrameTracking){this._updateStage_doNodeFrameTracking(b)}if(a.doNodeTracking){this._updateStage_doNodeTracking(b)}if(a.playSounds){this._updateStage_playSounds(b)}if(a.checkTextAdjustments){this._updateStage_doTextFixes(b)}if(a.checkButtonMouseovers){this._updateStage_doButtonHelperHovers(b)}if(a.doDraw){this._updateStage_doDraw(b)}if(a.doHtmlFrameUpdate){this._mtl._textController.inputTextFrameUpdate(b.name,b)}this._stageUpdate.currentlyUpdating=false};anzovinmod.MainTimeline_Stage.prototype._updateStage_doTick=function(a){this._stageUpdate.disableTick=false;this._stageUpdate.disableDraw=true;this._stage.update();a._anzovinmod.tickedLastUpdate=true};anzovinmod.MainTimeline_Stage.prototype._updateStage_doDraw=function(a){this._stageUpdate.disableTick=true;this._stageUpdate.disableDraw=false;this._stage.update();a._anzovinmod.drawnLastUpdate=true};anzovinmod.MainTimeline_Stage.prototype._updateStage_doButtonHelperHovers=function(c){if(c._anzovinmod.buttonHelpers==null){return}var e=[];var f={x:this._stage.mouseX,y:this._stage.mouseY};var k="";for(var b=0;b<c._anzovinmod.buttonHelpers.length;++b){var d=c._anzovinmod.buttonHelpers[b];var g=null;if(!d.isVisible()){continue}g=d.cursor;var h=d.parent;while(h!=null){if(h.cursor!=null){g=h}if(c==h){break}}if(h==null){continue}var j=d.globalToLocal(f.x,f.y);var a=d.hitArea.hitTest(j.x,j.y);if(a){k=g;if(!d._anzovinmod.buttonHelperIsOver){d._anzovinmod.buttonHelperIsOver=true;d._anzovinmod.buttonHelper.handleEvent({type:"rollover"})}}else{if(d._anzovinmod.buttonHelperIsOver){d._anzovinmod.buttonHelperIsOver=false;d._anzovinmod.buttonHelper.handleEvent({type:"rollout"})}}}if(this._mtl._canvas.style.cursor!=k){this._mtl._canvas.style.cursor=k}};anzovinmod.MainTimeline_Stage.prototype._updateStage_doTextFixes=function(a){if(!a._anzovinmod["textAdjustmentsFinal"]){this._mtl._textController.allTextFrameUpdate(a.name,!a.paused&&a._anzovinmod.tickedLastUpdate);if(a._anzovinmod["properties"]["noAnimatedText"]){a._anzovinmod["textAdjustmentsFinal"]=true}}};anzovinmod.MainTimeline_Stage.prototype._updateStage_playSounds=function(a){this._mtl._mtl_nodes.updateStagePlayNodeSounds(a)};anzovinmod.MainTimeline_Stage.prototype._updateStage_doNodeFrameTracking=function(a){this._mtl._mtl_nodes.updateStageDoNodeFrameTracking(a)};anzovinmod.MainTimeline_Stage.prototype._updateStage_doNodeTracking=function(a){this._mtl._mtl_nodes.updateStageDoNodeTracking(a)};anzovinmod.MainTimeline_Stage.prototype.onTick=function(a){if(this._currentScene<0){return}if(this._mtl.isState("hardpaused")){return}if(!a){a=0}if(a>0){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Stage.onTick","recommended skip frames: ",a)}do{var c=this._mtl._mtl_scenes.getCurrentScene();if(c==null){return}var b=false;if(c instanceof createjs.MovieClip){b=(c.timeline.position==c.timeline.duration-1)&&!c.paused}else{b=!c.paused}if(a>0){this._mtl._ticker.skippedFrame();if(b){this._mtl._mtl_scenes.nextScene();this.updateStage({doTick:false,doDraw:false,checkTextAdjustments:false,doHtmlFrameUpdate:false,checkButtonMouseovers:false})}else{this.updateStage({doDraw:false,checkTextAdjustments:false,doHtmlFrameUpdate:false,checkButtonMouseovers:false})}}else{if(b){this._mtl._mtl_scenes.nextScene();this.updateStage({doTick:false})}else{this.updateStage({})}}}while(a-->0)};anzovinmod.MainTimeline_Stage.prototype.setScale=function(a,b){a=anzovinmod.Utilities.defaultParam(a,1,true);b=anzovinmod.Utilities.defaultParam(b,1,true);this._stage.scaleX=a;this._stage.scaleY=b}}());
/*! MainTimeline_Nodes.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.MainTimeline_Nodes=function(a){this._mtl=a;this._currentNodeFrame=0;this._currentNodes=[];this._lastPlaybackPercent=0};anzovinmod.MainTimeline_Nodes.prototype._hardPauseResumeJump=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Nodes._hardPauseResumeJump","hard-resuming for a jump");this._mtl._mtl_sound.clearPausedSounds();this._mtl.setState("hardpaused",false)};anzovinmod.MainTimeline_Nodes.prototype.goNodeBack=function(){if(this._mtl.isState("hardpaused")){this._hardPauseResumeJump()}if(this._currentNodes.length==0){return}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Nodes.goNodeBack","going back a node");if(this._currentNodeFrame<this._mtl.getFPS()){if(this._currentNodes.length>0){this._currentNodes.pop()}}var a=false;if(this._currentNodes.length>0){a=true}this._gotoCurrentNodeStart(a)};anzovinmod.MainTimeline_Nodes.prototype.goNodeForward=function(){if(this._mtl.isState("hardpaused")){this._hardPauseResumeJump()}if(this._currentNodes.length==0){return}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Nodes.goNodeForward","going forward a node");var c=this._currentNodes[this._currentNodes.length-1];if(c.nextNode==null){return}var d=this._mtl.getCurrentScene();var e=this._mtl.getProgressNodes();for(var b in e){if(!e.hasOwnProperty(b)){continue}var a=e[b];if(a.name==c.nextNode){this._currentNodes.push(a);this._gotoCurrentNodeStart(true);break}}};anzovinmod.MainTimeline_Nodes.prototype.goNodeTo=function(d){d=anzovinmod.Utilities.defaultParam(d,null);if(d==null){return}if(this._mtl.isState("hardpaused")){this._hardPauseResumeJump()}if(this._currentNodes.length==0){return}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Nodes.goNodeTo","going to node: ",d);for(var c=0;c<this._currentNodes.length-1;++c){if(this._currentNodes[c]["name"]==d){for(var a=this._currentNodes.length-1;a>c;--a){this._currentNodes.pop()}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Nodes.goNodeTo","going back");this._gotoCurrentNodeStart(true);return}}var e=this._mtl.getCurrentScene();var f=e._anzovinmod["properties"]["progressNodes"];var b=this.getCurrentNode();while(b.nextNode!=null){if(!f.hasOwnProperty(b.nextNode)){break}b=f[b.nextNode];if(b.name==d){b=this._currentNodes[this._currentNodes.length-1];while(b.nextNode!=null){b=f[b.nextNode];this._currentNodes.push(b);if(b.name==d){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Nodes.goNodeTo","going forward");this._gotoCurrentNodeStart(true);return}}}}var b=this._currentNodes[this._currentNodes.length-1];if(b.name==d){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.MainTimeline_Nodes.goNodeTo","same node");this._gotoCurrentNodeStart(true);return}};anzovinmod.MainTimeline_Nodes.prototype._gotoCurrentNodeStart=function(a){this._mtl._mtl_sound.stopAllSounds();if(this._mtl.isState("ended")){this._mtl.setStates({playing:true,ended:false})}this._currentNodeFrame=0;var b={playSounds:false};if(this._currentNodes.length==0){this._mtl.gotoAndPlay("start",null,b)}else{this._mtl.gotoAndPlay(this._currentNodes[this._currentNodes.length-1]["frame"],null,b)}if(a){this._currentNodes.pop()}if(this._currentNodes.length==0){return}this._mtl._mtl_sound.startPlaythroughNodeSoundsPaused(this._currentNodeFrame,this._currentNodes,this._mtl._mtl_scenes.getSoundsAtNodes());this._mtl._mtl_sound.resumeSounds();anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Nodes._gotoCurrentNodeStart","node frame: ",this._currentNodeFrame," nodes: ",this._currentNodes)};anzovinmod.MainTimeline_Nodes.prototype.updateStagePlayNodeSounds=function(d){var b=d._anzovinmod["properties"];var a=b.soundsAtNodes;var c=null;if(this._currentNodes.length>0){c=this._currentNodes[this._currentNodes.length-1]["name"]}this._mtl._mtl_sound.startPlayingCurrentNodeSounds(this._currentNodeFrame,c,this._mtl._mtl_scenes.getSoundsAtNodes())};anzovinmod.MainTimeline_Nodes.prototype.updateStageDoNodeFrameTracking=function(a){if(a.paused){return}++this._currentNodeFrame;this.updatePlaybackPercent()};anzovinmod.MainTimeline_Nodes.prototype.updatePlaybackPercent=function(){var a=this.getPlaybackPercent();if(a!=this._lastPlaybackPercent){this._lastPlaybackPercent=a;this._mtl.sendPlaybackPercent(a)}};anzovinmod.MainTimeline_Nodes.prototype.getPlaybackPercent=function(){var c=this.getCurrentNode();if(c==null){return 0}var e=c.position;var b=100;if(c.nextNode!=null){var f=this._mtl.getProgressNodes();if(f.hasOwnProperty(c.nextNode)){var a=f[c.nextNode];b=a.position}}var d=b;if(c.length!=0){d=e+((b-e)*((this._currentNodeFrame+1)/c.length))}return d};anzovinmod.MainTimeline_Nodes.prototype.getCurrentNode=function(){if(this._currentNodes.length>0){return this._currentNodes[this._currentNodes.length-1]}return null};anzovinmod.MainTimeline_Nodes.prototype.updateStageDoNodeTracking=function(d){var c=d._anzovinmod["properties"];var e=c.progressNodes;for(var b in e){if(!e.hasOwnProperty(b)){continue}var a=e[b];if(a.frame==d.timeline.position){this._currentNodeFrame=0;this._currentNodes.push(a);anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline_Nodes.updateStageDoNodeTracking","pushed node on frame ",d.timeline.position,": ",a)}}};anzovinmod.MainTimeline_Nodes.prototype.resetNodes=function(){this._currentNodeFrame=0;this._currentNodes=[]}}());
/*! MainTimeline.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.MainTimeline=function(b,a){b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);this._mtl_sound=null;this._mtl_vars=null;this._mtl_state=null;this._mtl_scenes=null;this._mtl_size=null;this._mtl_stage=null;this._mtl_nodes=null;this._parent=b;this._divWrapper=null;this._canvas=null;this._textController=new anzovinmod.TextController();this._ticker=new anzovinmod.SelfAdjustingTicker();this._hardPauseResumePlay=false;this._animationEventCallbacks=[];this._playbackPercentCallbacks=[];this._replacementContainer=a;this._init()};anzovinmod.MainTimeline.prototype._init=function(){this._divWrapper=document.createElement("div");this._divWrapper.setAttribute("class","anzovinmod-maintimeline");if(this._parent==null){this._parent=document.body}this._parent.appendChild(this._divWrapper);this._divWrapper.appendChild(this._textController.createGetTextForm());this._canvas=document.createElement("canvas");this._mtl_sound=new anzovinmod.MainTimeline_Sound(this);this._mtl_vars=new anzovinmod.MainTimeline_Vars(this);this._mtl_state=new anzovinmod.MainTimeline_State(this);this._mtl_scenes=new anzovinmod.MainTimeline_Scenes(this);this._mtl_size=new anzovinmod.MainTimeline_Size(this);this._mtl_stage=new anzovinmod.MainTimeline_Stage(this);this._mtl_nodes=new anzovinmod.MainTimeline_Nodes(this);this._ticker.setCallback(anzovinmod.Utilities.bind(this._mtl_stage,this._mtl_stage.onTick));this._textController.createGetTextForm().appendChild(this._canvas);if(this._replacementContainer==null){this._replacementContainer=new anzovinmod.ReplacementVariableContainer()}if(typeof(createjs)!=="undefined"&&typeof(createjs.Sound)!=="undefined"){createjs.Sound.alternateExtensions=["ogg","mp3"]}this.addStateChangeCallback(anzovinmod.Utilities.bind(this,this._selfStateChangeCallback))};anzovinmod.MainTimeline.prototype.openUrl=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}window.open(a,"_blank")};anzovinmod.MainTimeline.prototype.getDivWrapper=function(){return this._divWrapper};anzovinmod.MainTimeline.prototype.getReplacementContainer=function(){return this._replacementContainer};anzovinmod.MainTimeline.prototype.addAnimationEventCallback=function(a){this._animationEventCallbacks.push(a)};anzovinmod.MainTimeline.prototype.addPlaybackPercentCallback=function(a){this._playbackPercentCallbacks.push(a)};anzovinmod.MainTimeline.prototype.sendPlaybackPercent=function(b){for(var a=0;a<this._playbackPercentCallbacks.length;++a){this._playbackPercentCallbacks[a](b)}};anzovinmod.MainTimeline.prototype.triggerAnimationEvent=function(b,c){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline.triggerAnimationEvent","animation event triggered: ",b," ",c);for(var a=0;a<this._animationEventCallbacks.length;++a){this._animationEventCallbacks[a](b,c)}};anzovinmod.MainTimeline.prototype.startAnimation=function(){this._mtl_nodes.resetNodes();this.gotoAndPlay("start");this.setState("started")};anzovinmod.MainTimeline.prototype.replayAnimation=function(){this._mtl_nodes.resetNodes();this.gotoAndPlay("start")};anzovinmod.MainTimeline.prototype.playSound=function(b,a){a=anzovinmod.Utilities.defaultParam(a,{},true);if(this._mtl_scenes.getCurrentScene()==null){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_NOTICE,"anzovinmod.MainTimeline.playSound","sound is attempting to play before scenes are fully loaded: ",b);return}a.addTickerTimeOffset=true;this._mtl_sound.playSoundConfig(b,a)};anzovinmod.MainTimeline.prototype._hardPause=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline._hardPause","hard-pausing");this._hardPauseResumePlay=false;var a=this._mtl_scenes.getCurrentScene();if(a!=null&&!a.paused){this._hardPauseResumePlay=true}var b=this.isState("hardpaused");this._mtl_sound.pauseSounds();this.setState("hardpaused",false,false);this.stop();this.setState("hardpaused",b,false)};anzovinmod.MainTimeline.prototype._hardResume=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.MainTimeline._hardResume","hard-resuming");var a=this.isState("hardpaused");this.setState("hardpaused",false,false);if(this._hardPauseResumePlay){this.play()}this.setState("hardpaused",a,false);this._hardPauseResumePlay=false;this._mtl_sound.resumeSounds()};anzovinmod.MainTimeline.prototype.findChildren=function(e,d){anzovinmod.Utilities.defaultParam(d,false,true);var c=[];var a=this.getScenes();for(var b in a){if(!a.hasOwnProperty(b)){continue}c=c.concat(anzovinmod.TimelineFindChildren.findChildren(e,a[b],this,d))}return c};anzovinmod.MainTimeline.prototype._selfStateChangeCallback=function(a){for(var b=0;b<a.length;++b){var c=a[b];switch(c){case"hardpaused":if(this.isState(c)){this._hardPause()}else{this._hardResume()}break;case"manifestloaded":if(this.isState("manifestloaded")){this._mtl_stage.checkLoadStage()}break;case"resize":if(this.isState("willresize")&&this.isState("resize")){this._mtl_size.resize();this.setStates({willresize:false,resize:false},false)}else{if(this.isState("resize")){this.setStates({willresize:false,resize:false},false)}}break;case"loading":if(this.isState("loading")){this._mtl_scenes.loadMainLoader()}break}}};anzovinmod.MainTimeline.prototype.resetTickerTimeout=function(){if(this._ticker.isStarted()){this._ticker.stop();this._ticker.start()}};anzovinmod.MainTimeline.prototype.getFPS=function(){return this._ticker.getFPS()};anzovinmod.MainTimeline.prototype.getParent=function(){return this._parent};anzovinmod.MainTimeline.prototype.getCanvas=function(){return this._canvas};anzovinmod.MainTimeline.prototype.setSizeOnTimelineElements=function(b,a,c){this._divWrapper.style.width=b+"px";this._divWrapper.style.height=a+"px";this._canvas.setAttribute("width",b+"px");this._canvas.setAttribute("height",a+"px");this._mtl_stage.setScale(c,c);this._textController.setScale(c)};anzovinmod.MainTimeline.prototype.goNodeBack=function(){this._mtl_nodes.goNodeBack()};anzovinmod.MainTimeline.prototype.goNodeForward=function(){this._mtl_nodes.goNodeForward()};anzovinmod.MainTimeline.prototype.goNodeTo=function(a){this._mtl_nodes.goNodeTo(a)};anzovinmod.MainTimeline.prototype.startStage=function(){this._mtl_stage.startStage()};anzovinmod.MainTimeline.prototype.addUnhandledMouseClickCallback=function(a){this._mtl_stage.addUnhandledMouseClickCallback(a)};anzovinmod.MainTimeline.prototype.checkLoadStage=function(){this._mtl_stage.checkLoadStage()};anzovinmod.MainTimeline.prototype.triggerResize=function(b,a){this._mtl_size.triggerResize(b,a)};anzovinmod.MainTimeline.prototype.setSize=function(e,d,a,c,b){this._mtl_size.setSize(e,d,a,c,b)};anzovinmod.MainTimeline.prototype.setCanvasSize=function(b,a){this._mtl_size.setCanvasSize(b,a)};anzovinmod.MainTimeline.prototype.getCanvasSize=function(){return this._mtl_size.getCanvasSize()};anzovinmod.MainTimeline.prototype.getResizeBehaviors=function(){return this._mtl_size.getResizeBehaviors()};anzovinmod.MainTimeline.prototype.startManifestLoading=function(){this._mtl_scenes.loadMainLoader()};anzovinmod.MainTimeline.prototype.attachScene=function(a){this._mtl_scenes.attachScene(a)};anzovinmod.MainTimeline.prototype._gotoAndPlayOrStop=function(e,c,g,b,d,a){this._mtl_scenes._gotoAndPlayOrStop(e,c,g,b,d,a)};anzovinmod.MainTimeline.prototype.gotoAndPlay=function(c,b,a){this._mtl_scenes.gotoAndPlay(c,b,a)};anzovinmod.MainTimeline.prototype.gotoAndStop=function(c,b,a){this._mtl_scenes.gotoAndStop(c,b,a)};anzovinmod.MainTimeline.prototype.play=function(){this._mtl_scenes.play()};anzovinmod.MainTimeline.prototype.stop=function(){this._mtl_scenes.stop()};anzovinmod.MainTimeline.prototype.getCurrentScene=function(){return this._mtl_scenes.getCurrentScene()};anzovinmod.MainTimeline.prototype.getScenes=function(){return this._mtl_scenes.getScenes()};anzovinmod.MainTimeline.prototype.getProgressNodes=function(){return this._mtl_scenes.getProgressNodes()};anzovinmod.MainTimeline.prototype.getLoginButtonConfig=function(){return this._mtl_scenes.getLoginButtonConfig()};anzovinmod.MainTimeline.prototype.isLateLoadFinished=function(){return this._mtl_scenes.isLateLoadFinished()};anzovinmod.MainTimeline.prototype.lateLoadComplete=function(a){return this._mtl_scenes.lateLoadComplete(a)};anzovinmod.MainTimeline.prototype.setVolume=function(a){this._mtl_sound.setVolume(a)};anzovinmod.MainTimeline.prototype.setMute=function(a){this._mtl_sound.setMute(a)};anzovinmod.MainTimeline.prototype.hasVar=function(a){return this._mtl_vars.hasVar(a)};anzovinmod.MainTimeline.prototype.getVar=function(a,b){return this._mtl_vars.getVar(a,b)};anzovinmod.MainTimeline.prototype.setVar=function(c,b,a){this._mtl_vars.setVar(c,b,a)};anzovinmod.MainTimeline.prototype.registerCallback=function(b,e,d,a,c){this._mtl_vars.registerCallback(b,e,d,a,c)};anzovinmod.MainTimeline.prototype.applyCallback=function(b,a){this._mtl_vars.applyCallback(b,a)};anzovinmod.MainTimeline.prototype.isState=function(a){return this._mtl_state.isState(a)};anzovinmod.MainTimeline.prototype.setState=function(c,b,a){this._mtl_state.setState(c,b,a)};anzovinmod.MainTimeline.prototype.setStates=function(b,a){this._mtl_state.setStates(b,a)};anzovinmod.MainTimeline.prototype.addStateChangeCallback=function(a){this._mtl_state.addStateChangeCallback(a)}}());
/*! TimelineFindChildren.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.TimelineFindChildren=function(){throw"cannot instantiate anzovinmod.TimelineFindChildren"};anzovinmod.TimelineFindChildren.namifyAllChildren=function(g,c){g=anzovinmod.Utilities.defaultParam(g,null);c=anzovinmod.Utilities.defaultParam(c,true);if(g==null){return}anzovinmod.Logging.logit(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.TimelineFindChildren.namifyAllChildren() starting to namify children on object ",g);var a=anzovinmod.Utilities.listChildDisplayObjectProperties(g);for(var b=0;b<a.length;++b){var f=g[a[b]];if(f==null){continue}if(f.name==null){var e=a[b];e=anzovinmod.TimelineFindChildren._removeUnderscoreInteger(e);try{f.name=e}catch(d){anzovinmod.Logging.logit(anzovinmod.Logging.LOG_ERROR,"anzovinmod.TimelineFindChildren.namifyAllChildren() exception when attempting to access property '",a[b],"' on object ",g,", consider adding to anzovinmod.Utilities.CreateJSObjects.*.nonObjectAttributes");throw d}}if(c&&(f instanceof createjs.MovieClip||f instanceof createjs.Container)){anzovinmod.TimelineFindChildren.namifyAllChildren(f,c)}}};anzovinmod.TimelineFindChildren.findChildren=function(b,a,f,d){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.TimelineFindChildren.findChildren","starting search in ",a," for ",b," with mtl ",f," as full ",d);b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);f=anzovinmod.Utilities.defaultParam(f,null);d=anzovinmod.Utilities.defaultParam(d,false,true);if(b==null||a==null||f==null){return[]}var g=anzovinmod.TimelineFindChildren._optimizeN(b);if(typeof(b)=="string"){g=anzovinmod.TimelineFindChildren._translateN([g])}else{if(b instanceof Array){g=anzovinmod.TimelineFindChildren._translateN(g)}}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.TimelineFindChildren.findChildren","translated to: ",g);var c=f.getCurrentScene();var i={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if(h=="*"||(c!=null&&c.name==h)){anzovinmod.TimelineFindChildren._mergeN(i,g[h])}}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.TimelineFindChildren.findChildren","searching with names object ",i);var e=anzovinmod.TimelineFindChildren._recurse(i,a,d);anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.TimelineFindChildren.findChildren","found: ",e);return e};anzovinmod.TimelineFindChildren._removeUnderscoreInteger=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return a}var c=a.split("_");if(c.length<=1){return a}var d=c[c.length-1];var b=parseInt(d);if(!isNaN(b)&&b.toString()===d){c.pop();return c.join("_")}return a};anzovinmod.TimelineFindChildren._recurse=function(c,b,j){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE_2,"anzovinmod.TimelineFindChildren._recurse","recursing search ",c," for ",b);c=anzovinmod.Utilities.defaultParam(c,null);b=anzovinmod.Utilities.defaultParam(b,null);j=anzovinmod.Utilities.defaultParam(j,false,true);var k=[];if(c==null||b==null){return k}var e=[];if(j){var l=anzovinmod.Utilities.listChildDisplayObjectProperties(b);anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE_2,"anzovinmod.TimelineFindChildren._recurse","found in ",b," children ",l);for(var g=0;g<l.length;++g){e.push(b[l[g]])}}else{for(var g=0;g<b.children.length;++g){e.push(b.children[g])}}for(var g=0;g<e.length;++g){var f=e[g];if(f==null){continue}var h=f.name;if(h==null){continue}var d=anzovinmod.TimelineFindChildren._isMatchN(c,h);if(d){k.push(f)}if(f instanceof createjs.MovieClip||f instanceof createjs.Container){var a=anzovinmod.TimelineFindChildren._parseN(c,h);k=k.concat(anzovinmod.TimelineFindChildren._recurse(a,f,j))}}return k};anzovinmod.TimelineFindChildren._isMatchN=function(b,a){b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);if(b==null){return false}if(a!=null&&b.hasOwnProperty(a)&&b[a]!=null&&b[a].hasOwnProperty(null)){return true}if(b.hasOwnProperty("*")&&b["*"]!=null&&b["*"].hasOwnProperty(null)){return true}if(b.hasOwnProperty("**")&&b["**"]!=null){if(a!=null&&b["**"].hasOwnProperty(a)&&b["**"][a]!=null&&b["**"][a].hasOwnProperty(null)){return true}if(b["**"].hasOwnProperty("*")&&b["**"]["*"]!=null&&b["**"]["*"].hasOwnProperty(null)){return true}}return false};anzovinmod.TimelineFindChildren._translateN=function(h){h=anzovinmod.Utilities.defaultParam(h,null);var d={};if(h==null){return d}for(var e=0;e<h.length;++e){var g=h[e].split(".");var f=d;var c=null;var a=g.length;while(g.length>0){var b=g.shift();if(b==""){b=null}if(b==null){continue}c=b;if(!f.hasOwnProperty(c)){f[c]={}}f=f[c]}if(a>1){f[null]=null}}return d};anzovinmod.TimelineFindChildren._parseN=function(e,a){anzovinmod.Logging.logit(anzovinmod.Logging.LOG_TRACE+1,"anzovinmod.TimelineFindChildren._parseN() parsing ",e," with ",a);e=anzovinmod.Utilities.defaultParam(e,null);a=anzovinmod.Utilities.defaultParam(a,null);var d={};if(e==null||a==null){return d}for(var c in e){if(!e.hasOwnProperty(c)){continue}if(c=="**"){anzovinmod.TimelineFindChildren._mergeNE(d,e,c);for(var b in e[c]){if(!e[c].hasOwnProperty(b)){continue}if(b=="*"||b==a){anzovinmod.TimelineFindChildren._mergeN(d,e[c][b])}}}else{if(c=="*"||c==a){anzovinmod.TimelineFindChildren._mergeN(d,e[c])}}}anzovinmod.Logging.logit(anzovinmod.Logging.LOG_TRACE+1,"anzovinmod.TimelineFindChildren._parseN() parsing result ",d);return d};anzovinmod.TimelineFindChildren._mergeN=function(a,c){anzovinmod.Logging.logit(anzovinmod.Logging.LOG_TRACE+1,"anzovinmod.TimelineFindChildren._mergeN() merging ",a," with ",c);a=anzovinmod.Utilities.defaultParam(a,null);c=anzovinmod.Utilities.defaultParam(c,null);if(a==null||c==null){return a}for(var b in c){if(!c.hasOwnProperty(b)){continue}if(!a.hasOwnProperty(b)){a[b]=anzovinmod.Utilities.cloneObject(c[b],true)}else{anzovinmod.TimelineFindChildren._mergeNE(a,c,b)}}anzovinmod.Logging.logit(anzovinmod.Logging.LOG_TRACE+1,"anzovinmod.TimelineFindChildren._mergeN() result ",a);return a};anzovinmod.TimelineFindChildren._mergeNE=function(a,d,c){anzovinmod.Logging.logit(anzovinmod.Logging.LOG_TRACE+1,"anzovinmod.TimelineFindChildren._mergeNE() merging ",a," with ",d," via ",c);a=anzovinmod.Utilities.defaultParam(a,null);d=anzovinmod.Utilities.defaultParam(d,null);c=anzovinmod.Utilities.defaultParam(c,null);if(a==null||d==null||!d.hasOwnProperty(c)){return a}if(!a.hasOwnProperty(c)){a[c]=anzovinmod.Utilities.cloneObject(d[c],true)}else{for(var b in d[c]){if(!d[c].hasOwnProperty(b)){continue}anzovinmod.TimelineFindChildren._mergeNE(a[c],d[c],b)}}anzovinmod.Logging.logit(anzovinmod.Logging.LOG_TRACE+1,"anzovinmod.TimelineFindChildren._mergeNE() result ",a);return a};anzovinmod.TimelineFindChildren.isMatch=function(d,c,k,h,b){d=anzovinmod.Utilities.defaultParam(d,null);c=anzovinmod.Utilities.defaultParam(c,null);k=anzovinmod.Utilities.defaultParam(k,null);h=anzovinmod.Utilities.defaultParam(h,true);b=anzovinmod.Utilities.defaultParam(b,true);if(d==null||c==null||!c.hasOwnProperty("name")){return false}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.TimelineFindChildren.isMatch","determining match for ",c.name," against matches ",d);var l=anzovinmod.TimelineFindChildren._optimizeN(d);if(typeof(d)=="string"){l=anzovinmod.TimelineFindChildren._translateN([l])}else{if(d instanceof Array){l=anzovinmod.TimelineFindChildren._translateN(l)}}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.TimelineFindChildren.isMatch","translated to: ",l);var q=[];var j=c;var f=false;while(j!=null&&!(j instanceof createjs.Stage)&&(j instanceof createjs.MovieClip||j instanceof createjs.Container)){q.push(j.name);j=j.parent}if(j instanceof createjs.Stage){if(k!=null&&k._stage==j){f=true}}q.reverse();anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.TimelineFindChildren.isMatch","built path: ",q," timeline is root: ",f);var p={};var a=null;if(k!=null&&h&&k._currentScene>=0){a=k._sceneOrder[k._currentScene];anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.TimelineFindChildren.isMatch","using timeline scene: ",a)}for(var m in l){if(!l.hasOwnProperty(m)){continue}if(m=="*"||(a!=null&&a==m)){anzovinmod.TimelineFindChildren._mergeN(p,l[m])}}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.TimelineFindChildren.isMatch","scene searching with n: ",p);for(var e=0;e<q.length;++e){p=anzovinmod.TimelineFindChildren._parseN(p,q[e]);anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.TimelineFindChildren.isMatch","path component '",q[e],"' in scene n: ",p)}var g=false;if(p.hasOwnProperty(null)){g=true&&(!b||f)}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_TRACE,"anzovinmod.TimelineFindChildren.isMatch","is a match: ",g);return g};anzovinmod.TimelineFindChildren._optimizeN=function(d){d=anzovinmod.Utilities.defaultParam(d,null);if(d==null){return null}var c=[];if(typeof(d)=="string"){c=[d]}else{if(d instanceof Array){c=d}else{return null}}for(var a=0;a<c.length;++a){var b=c[a];if(b.indexOf(".")<0){b="*.**."+b}c[a]=b}if(typeof(d)=="string"){return c[0]}return c}}());
/*! TextController.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.TextController=function(){this._allTextElements={};this._textInputs={};this._animatedTextNodes_y={};this._textForm=null;this._textFormDiv=null;this._width=1920;this._height=1080;this._scale=1};anzovinmod.TextController.prototype.setSize=function(b,a){b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);if(b==null||a==null){return}this._width=b;this._height=a;this._writeSizesToCss()};anzovinmod.TextController.prototype.setScale=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}this._scale=a;this._writeSizesToCss()};anzovinmod.TextController.prototype.setSizeScale=function(b,a,c){b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);c=anzovinmod.Utilities.defaultParam(c,null);if(b!=null&&a!=null){this._width=b;this._height=a}if(c!=null){this._scale=c}this._writeSizesToCss()};anzovinmod.TextController.prototype._writeSizesToCss=function(){if(this._textFormDiv!=null){this._textFormDiv.style.transform="scale("+this._scale+")";this._textFormDiv.style.MozTransform="scale("+this._scale+")";this._textFormDiv.style.WebkitTransform="scale("+this._scale+")";this._textFormDiv.style.OTransform="scale("+this._scale+")";this._textFormDiv.style.MSTransform="scale("+this._scale+")"}};anzovinmod.TextController.prototype.initTextNodesFromMtl=function(d,e){d=anzovinmod.Utilities.defaultParam(d,null);e=anzovinmod.Utilities.defaultParam(e,null);if(d==null){return}if(e==null){return}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.TextController.initTextNodesFromMtl","initializing text nodes for scene ",e.name);if(this._textInputs.hasOwnProperty(e.name)){return}var a=this._findTextNodesOnScene(d,e.name);this._textInputs[e.name]=[];this._allTextElements[e.name]=[];for(var b=0;b<a.length;++b){var c=a[b];this._allTextElements[e.name].push(c);var f=c.name;if(f!=null&&f.length>6&&f.lastIndexOf("_input")==f.length-6){this._textInputs[e.name].push(c)}}this._createTextFormInputs(e.name);this.hideSceneElements(e.name)};anzovinmod.TextController.prototype._findTextNodesOnScene=function(c,e){c=anzovinmod.Utilities.defaultParam(c,null);e=anzovinmod.Utilities.defaultParam(e,null);var a=[];if(c==null||e==null){return a}var d=c.findChildren(e+".**.*",true);for(var b=0;b<d.length;++b){if(d[b] instanceof createjs.Text){a.push(d[b])}}return a};anzovinmod.TextController.prototype.createGetTextForm=function(){if(this._textForm!=null){return this._textForm}this._textForm=document.createElement("form");this._textForm.setAttribute("method","post");this._textForm.setAttribute("action","");this._textFormDiv=document.createElement("div");this._textFormDiv.setAttribute("class","formInputs");this._textForm.appendChild(this._textFormDiv);this._writeSizesToCss();return this._textForm};anzovinmod.TextController.prototype._createTextFormInputs=function(d){d=anzovinmod.Utilities.defaultParam(d,null);if(d==null){return}if(this._textForm==null){return}if(this._textFormDiv==null){return}if(!this._textInputs.hasOwnProperty(d)){return}for(var b=0;b<this._textInputs[d].length;++b){var c=this._textInputs[d][b];if(c.hasOwnProperty("_textFormInputElement")){continue}var a=document.createElement("input");a.style.font=c.font;a.style.color=c.color;switch(c.textAlign){case"left":case"start":a.style.textAlign="left";break;case"right":case"end":a.style.textAlign="right";break;case"center":a.style.textAlign="center";break}a.value=c.text;a.style.display="none";c.visible=false;this._textFormDiv.appendChild(a);c._textFormInputElement=a;c._textFormInputElementDOM=new createjs.DOMElement(a)}};anzovinmod.TextController.prototype.hideSceneElements=function(d){d=anzovinmod.Utilities.defaultParam(d,null);if(d==null){return}if(!this._textInputs.hasOwnProperty(d)){return}for(var a=0;a<this._textInputs[d].length;++a){var c=this._textInputs[d][a];if(!c.hasOwnProperty("_textFormInputElement")){continue}var b=c._textFormInputElement;if(b.style.display!="none"){b.style.display="none"}}};anzovinmod.TextController.prototype.allTextFrameUpdate=function(g,d){g=anzovinmod.Utilities.defaultParam(g,null);d=anzovinmod.Utilities.defaultParam(d,true,true);if(g==null){return}if(!this._animatedTextNodes_y.hasOwnProperty(g)){if(!this._allTextElements.hasOwnProperty(g)){return}this._animatedTextNodes_y[g]=anzovinmod.Utilities.cloneArray(this._allTextElements[g],false)}var a=this._animatedTextNodes_y[g];var c=a.length;for(var b=0;b<c;++b){var f=a[b];if(!this._frameNodeFixCjsTextPosition(f)&&d){a[b--]=a[--c]}}if(c!=a.length){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.TextController.allTextFrameUpdate","reducing animated text nodes from ",a.length," to ",c);this._animatedTextNodes_y[g]=anzovinmod.Utilities.cloneArray(a,false,c)}};anzovinmod.TextController.prototype.inputTextFrameUpdate=function(c,f){c=anzovinmod.Utilities.defaultParam(c,null);f=anzovinmod.Utilities.defaultParam(f,null);if(c==null){return}if(!this._textInputs.hasOwnProperty(c)){return}var d=this._textInputs[c];for(var a=0;a<d.length;++a){var b=d[a];if(!b.hasOwnProperty("_textFormInputElement")||b._textFormInputElement==null){continue}if(this._frameNodeHideIfNotOnStage(b,f)){continue}this._frameNodeEnsureDomeIsAttachedToParent(b);this._frameNodeAdjustHtmlInputSizeAndPosition(b);this._frameNodeEnsureIsVisible(b)}};anzovinmod.TextController.prototype._frameNodeHideIfNotOnStage=function(c,d){var a=c._textFormInputElement;var b=c.parent;while(b!=null&&b!=d){b=b.parent}if(b==null||b!=d){if(a.style.display!="none"){a.style.display="none"}return true}return false};anzovinmod.TextController.prototype._frameNodeEnsureDomeIsAttachedToParent=function(a){var b=a._textFormInputElementDOM;if(a.parent.children.indexOf(b)==-1){a.parent.addChild(b);this._frameNodeManuallySetHtmlInputTransformationMatrix(a)}};anzovinmod.TextController.prototype._frameNodeFixCjsTextPosition=function(c){if(c.y instanceof Number){return false}var a=c.font.split(" ")[0];var b=0;if(a.indexOf("px")>0){b=a.slice(0,a.indexOf("px"));b=b/10}else{if(a.indexOf("pt")>0){b=a.slice(0,a.indexOf("pt"));b=(b*4/3)/10}}c.y=new Number(c.y+2+b);return true};anzovinmod.TextController.prototype._frameNodeAdjustHtmlInputSizeAndPosition=function(h){var b=h._textFormInputElement;var g,f,c,a;var d=null;if(h.maxWidth!=null){c=h.maxWidth}else{if(h.lineWidth!=null){c=h.lineWidth}else{d=h.getBounds();if(d!=null){c=d.width}else{c=h.getMeasuredWidth()}}}if(d!=null){a=d.height}else{a=h.getMeasuredLineHeight()}if(d!=null){g=h.x+d.x}else{switch(h.textAlign){case"right":case"end":g=h.x-c;break;case"center":g=h.x-c/2;break;case"left":case"start":default:g=h.x;break}}if(d!=null){f=h.y+d.y}else{switch(h.textBaseline){case"bottom":case"ideographic":case"alphabetic":f=h.y-a;break;case"middle":f=h.y-a/2;break;case"top":case"hanging":default:f=h.y;break}}f=f-2;g=g+"px";f=f+"px";c=c+"px";a=a+"px";if(b.style.left!=g){b.style.left=g}if(b.style.top!=f){b.style.top=f}if(b.style.width!=c){b.style.width=c}if(b.style.height!=a){b.style.height=a}};anzovinmod.TextController.prototype._frameNodeEnsureIsVisible=function(b){var a=b._textFormInputElement;if(a.style.display!=""){a.style.display=""}};anzovinmod.TextController.prototype._frameNodeManuallySetHtmlInputTransformationMatrix=function(d){var c=d._textFormInputElement;var f=d._textFormInputElementDOM;var b=f.getConcatenatedMatrix();var a=anzovinmod.Utilities.cssTransformMatrix2D(b);c.style.transform=a;c.style.MozTransform=a;c.style.WebkitTransform=a;c.style.OTransform=a;c.style.MsTransform=a}}());
/*! Player.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.Player=function(b,a){b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);this._id=null;this._parent=b;this._divWrapper=null;this._divPlayerControls=null;this._isMobile=false;this._isMobileApp=false;this._controlCallbacks={};this._windowResizeCallbackFunction=null;this._windowBlurTimeout=null;this._windowBlurTimeoutFunction=anzovinmod.Utilities.bind(this,this._windowBlurTimeoutCallback);this._playerControlConfiguration={frame:["loading-frame","main-pause-frame","loading-login"],center:["main-begin-play","loading","loading-text"],top:["top-bar","back-empty"],left:[],bottom:["bottom-bar"],right:[],"top-left":["back"],"top-right":["login"],"bottom-left":["pause","replay","nodenav-back","nodenav-forward"],"bottom-right":["volume","volume-slider"]};this._playerControls={};this._replacementContainer=a;this._calledWidth="window";this._calledHeight="window";this._currentWidth=null;this._currentHeight=null;this._currentCssSize=null;this._mainTimeline=null;this._mainTimelineDivWrapper=null;this._isFlash=false;this._flashLoaded=false;this._flashAttachScenes=[];this._uiControlsShown=true;this._allowHidingUIElements={playing:false,ended:true,extraheight:true};this._lastMouseMovementTimer=null;this._lastMouseMovementTimerLength=3000;this._lastMouseMovementTimerFunction=null;this._lastPercentUpdateTime=null;this._lastPercentUpdateValue=0;this._lastPercentUpdateRealValue=0;this._lastPercentUpdateInterval=1000;this._posterImage=null;this._flashLoadBoundCallback=null;this._animationStartLoadTime=new Date();this._init()};anzovinmod.Player.prototype._init=function(){var q=this;this._id=anzovinmod.Player.uniqueIds.length+1;anzovinmod.Player.uniqueIds.push({id:this._id,player:this});this._divWrapper=document.createElement("div");this._divWrapper.setAttribute("class","anzovinmod-player");if(this._parent==null){this._parent=document.body}this._parent.appendChild(this._divWrapper);this._divPlayerControls=document.createElement("div");this._divPlayerControls.setAttribute("class","player-controls");this._divWrapper.appendChild(this._divPlayerControls);for(var m in this._playerControlConfiguration){if(!this._playerControlConfiguration.hasOwnProperty(m)){continue}var d=this._playerControlConfiguration[m];var r=document.createElement("div");if(m=="frame"){r.setAttribute("class","frame")}else{r.setAttribute("class","controls controls-"+m)}this._divPlayerControls.appendChild(r);for(var k=0;k<d.length;++k){var l=d[k];var f=document.createElement("div");var o=l.split(" ");var n="control";for(var g=0;g<o.length;++g){n+=" control-"+o[g]}f.setAttribute("class",n);r.appendChild(f);this._playerControls[l]=f;var c={state:false,"control-name":l};anzovinmod.Utilities.setDomElementProperty(f,"_anzovinmod",c);f.onclick=anzovinmod.Utilities.bind(this,this._controlClickCallback);switch(l){case"login":var b=document.createElement("div");b.setAttribute("class","text");b.innerHTML="Login";anzovinmod.Utilities.setDomElementProperty(b,"_anzovinmod",c);f.appendChild(b);break;case"back":case"pause":case"replay":case"nodenav-back":case"nodenav-forward":case"volume":case"main-pause":case"main-begin-play":var b=document.createElement("div");b.setAttribute("class","icon");anzovinmod.Utilities.setDomElementProperty(b,"_anzovinmod",c);f.appendChild(b);break;case"loading":var h=document.createElement("img");h.setAttribute("class","loading-image");h.src="../images/loading-size-l.gif";f.appendChild(h);break;case"loading-text":var b=document.createElement("div");b.innerHTML="Loading";f.appendChild(b);break;case"volume-slider":var p=document.createElement("input");p.setAttribute("type","range");p.setAttribute("min","0.0");p.setAttribute("max","1.0");p.setAttribute("step","0.01");p.setAttribute("value","0.5");f.appendChild(p);c["rangeslider-input"]=p;c["rangeslider-instance"]=new rangeslider(p,{polyfill:false,onSlide:function(j,i){if(q&&q._mainTimeline&&typeof q._mainTimeline.setVolume!=="undefined"){q._mainTimeline.setVolume(i)}},onSlideEnd:function(j,i){if(q&&q._mainTimeline&&typeof q._mainTimeline.setVolume!=="undefined"){q._mainTimeline.setVolume(i)}},rangeClass:"rangeslider",fillClass:"fill",handleClass:"handle",extraSelectClass:"extraselect"});break}}}if(this._replacementContainer==null){this._replacementContainer=new anzovinmod.ReplacementVariableContainer()}if(anzovinmod.MainTimeline){this._initCanvasMainTimeline()}else{this._isFlash=true}this._divWrapper.onmousemove=anzovinmod.Utilities.bind(this,this._playerMouseMoveHandler);this._lastMouseMovementTimerFunction=anzovinmod.Utilities.bind(this,this._playerMouseMoveTimeout);if(this._replacementContainer.has("PosterImageURL")){var e=this._replacementContainer.get("PosterImageURL");var h=document.createElement("img");h.setAttribute("class","poster");var a=this._divWrapper;h.onload=function(){a.appendChild(h)};h.src=e;this._posterImage=h}if(this._replacementContainer.has("IsMobile")){this.isMobile(this._replacementContainer.get("IsMobile")=="1")}this._windowResizeCallbackFunction=anzovinmod.Utilities.bind(this,this._windowResizeCallback);if(window.addEventListener){window.addEventListener("resize",this._windowResizeCallbackFunction)}else{if(window.attachEvent){window.attachEvent("onresize",this._windowResizeCallbackFunction)}}this._setupWindowFocusBlurCallbacks();if(!this._isFlash){this._mainTimeline.addUnhandledMouseClickCallback(anzovinmod.Utilities.bind(this,this._unhandledStageMouseClick))}};anzovinmod.Player.prototype.startManifestLoading=function(){this._mainTimeline.startManifestLoading()};anzovinmod.Player.prototype._unhandledStageMouseClick=function(a){if(this._isMobile){if(this._allowHidingUIElements&&this._uiControlsShown){this._hideControlsAndCleanupTimeoutTimer()}else{this._showControlsAndResetMovementTimeoutTimer()}}};anzovinmod.Player.prototype.pauseAnimation=function(){if(this._playerControls.hasOwnProperty("pause")){var b=this._playerControls.pause;var a=anzovinmod.Utilities.getDomElementProperty(b,"_anzovinmod");if(!a.state){this._controlClickHandle(this._playerControls.pause,"pause")}}};anzovinmod.Player.prototype._setupWindowFocusBlurCallbacks=function(){if("hidden" in document){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback with 'hidden' support");this._attachFocusBlurListener(document,"visibilitychange",this._windowVisibilityChangeCallback)}else{if("mozHidden" in document){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback with 'mozHidden' support");this._attachFocusBlurListener(document,"mozvisibilitychange",this._windowVisibilityChangeCallback)}else{if("webkitHidden" in document){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback with 'webkitHidden' support");this._attachFocusBlurListener(document,"webkitvisibilitychange",this._windowVisibilityChangeCallback)}else{if("msHidden" in document){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback with 'msHidden' support");this._attachFocusBlurListener(document,"msvisibilitychange",this._windowVisibilityChangeCallback)}else{if(anzovinmod.Utilities.IsIE9()){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback without 'hidden' support, for IE9 specifically");this._attachFocusBlurListener(window,"focus",this._windowFocusCallback);this._attachFocusBlurListener(window,"blur",this._windowBlurCallback)}else{if(anzovinmod.Utilities.IsIE8()){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback without 'hidden' support, for IE8 specifically");this._attachFocusBlurListener(document,"onfocusin",this._windowFocusCallback);this._attachFocusBlurListener(document,"onfocusout",this._windowBlurCallback)}else{anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._setupWindowFocusBlurCallbacks","setting up callback without 'hidden' support, other");this._attachFocusBlurListener(document,"focus",this._windowFocusCallback);this._attachFocusBlurListener(document,"blur",this._windowBlurCallback);this._attachFocusBlurListener(document,"onfocusin",this._windowFocusCallback);this._attachFocusBlurListener(document,"onfocusout",this._windowBlurCallback);this._attachFocusBlurListener(document,"focusin",this._windowFocusCallback);this._attachFocusBlurListener(document,"focusout",this._windowBlurCallback);this._attachFocusBlurListener(document,"pageshow",this._windowFocusCallback);this._attachFocusBlurListener(document,"pagehide",this._windowBlurCallback)}}}}}}};anzovinmod.Player.prototype._attachFocusBlurListener=function(c,b,a){c=anzovinmod.Utilities.defaultParam(c,null);b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);if(c==null||b==null||a==null){return}if(c.addEventListener){c.addEventListener(b,anzovinmod.Utilities.bind(this,a))}else{if(c.attachEvent){c.attachEvent(b,anzovinmod.Utilities.bind(this,a))}}};anzovinmod.Player.prototype._windowVisibilityChangeCallback=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._windowVisibilityChangeCallback","visibility changed callback");var a=false;if("hidden" in document){a=document.hidden}else{if("mozHidden" in document){a=document.mozHidden}else{if("webkitHidden" in document){a=document.webkitHidden}else{if("msHidden" in document){a=document.msHidden}}}}if(a){this.pauseAnimation()}};anzovinmod.Player.prototype._windowFocusCallback=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._windowFocusCallback","focused callback");if(this._windowBlurTimeout!=null){clearTimeout(this._windowBlurTimeout);this._windowBlurTimeout=null}};anzovinmod.Player.prototype._windowBlurCallback=function(){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._windowBlurCallback","blurred callback");if(this._windowBlurTimeout==null){this._windowBlurTimeout=setTimeout(this._windowBlurTimeoutFunction,1)}};anzovinmod.Player.prototype._windowBlurTimeoutCallback=function(){this.pauseAnimation()};anzovinmod.Player.prototype._windowResizeCallback=function(){this.resize()};anzovinmod.Player.prototype.isMobile=function(a){a=anzovinmod.Utilities.defaultParam(a,false,true);if(a!=this._isMobile){this._isMobile=a;var d=this._divWrapper.getAttribute("class");var b=d;if(a){b=anzovinmod.Utilities.addStringComponent(d,"is-mobile")}else{b=anzovinmod.Utilities.removeStringComponent(d,"is-mobile")}if(d!=b){this._divWrapper.setAttribute("class",b)}}};anzovinmod.Player.prototype.isMobileApp=function(a){a=anzovinmod.Utilities.defaultParam(a,false,true);if(a!=this._isMobileApp){this._isMobileApp=a;var d=this._divWrapper.getAttribute("class");var b=d;if(a){b=anzovinmod.Utilities.addStringComponent(d,"is-mobile-app")}else{b=anzovinmod.Utilities.removeStringComponent(d,"is-mobile-app")}if(d!=b){this._divWrapper.setAttribute("class",b)}}};anzovinmod.Player.prototype.addControlCallback=function(b,a){a=anzovinmod.Utilities.defaultParam(a,null);b=anzovinmod.Utilities.defaultParam(b,null);if(a==null||b==null){return}if(!this._controlCallbacks.hasOwnProperty(a)){this._controlCallbacks[a]=[]}this._controlCallbacks[a].push(b)};anzovinmod.Player.prototype.removeControlCallback=function(d,c){c=anzovinmod.Utilities.defaultParam(c,null);d=anzovinmod.Utilities.defaultParam(d,null);if(d==null){return}if(c==null){for(var a in this._controlCallbacks){if(!this._controlCallbacks.hasOwnProperty(a)){continue}for(var b=0;b<this._controlCallbacks[a].length;++b){if(this._controlCallbacks[a][b]==d){this._controlCallbacks[a].splice(b,1);--b}}}}else{if(this._controlCallbacks.hasOwnProperty(c)){for(var b=0;b<this._controlCallbacks[c].length;++b){if(this._controlCallbacks[c][b]==d){this._controlCallbacks[c].splice(b,1);--b}}}}};anzovinmod.Player.prototype._initCanvasMainTimeline=function(){this._mainTimeline=new anzovinmod.MainTimeline(this._divWrapper,this._replacementContainer);this._mainTimelineDivWrapper=this._mainTimeline.getDivWrapper();this._mainTimeline.addAnimationEventCallback(anzovinmod.Utilities.bind(this,this._handleTriggeredAnimationEvent));this._mainTimeline.addStateChangeCallback(anzovinmod.Utilities.bind(this,this._mainTimelineStateChangeCallback));this._mainTimeline.addPlaybackPercentCallback(anzovinmod.Utilities.bind(this,this.setPlaybackPercent))};anzovinmod.Player.prototype._initFlashMainTimeline=function(){if(this._flashAttachScenes.length==0){return}var d=this._flashAttachScenes[0]["name"];var f=document.createElement("div");f.setAttribute("class","anzovinmod-maintimeline-flash");var c="<object";var b={id:"flashInstance",name:"flashInstance",data:"../flash/"+d+".swf",type:"application/x-shockwave-flash"};for(var a in b){if(!b.hasOwnProperty(a)){continue}c+=" "+a+'="'+b[a]+'"'}c+=">";c+='<div class="noflash"><p>This video requires Adobe Flash Player.</p><p>To watch this video, please install Adobe Flash Player or open this link in a different browser.</p><p><a target="_blank" href="http://get.adobe.com/flashplayer/">Click here to download from Adobe</a></p><a target="_blank" href="http://get.adobe.com/flashplayer/"><img src="../images/getflash.png" width="158px" height="39px"></a></div>';var g={movie:"../flash/"+d+".swf",quality:"best",bgcolor:"#ffffff",play:"true",loop:"true",wmode:"opaque",scale:"showall",menu:"true",devicefont:"false",salign:"",allowScriptAccess:"always",transparent:"wmode"};for(var a in g){if(!g.hasOwnProperty(a)){continue}c+='<param name="'+a+'" value="'+g[a]+'" />'}c+="</object>";f.innerHTML=c;var e=f.children[0];this._mainTimeline=e;this._mainTimelineDivWrapper=f;this._divWrapper.appendChild(f);this._flashLoadTimerFunction()};anzovinmod.Player.prototype._flashLoadTimerFunction=function(){if(typeof this._mainTimeline.isState==="undefined"){if(this._flashLoadBoundCallback==null){this._flashLoadBoundCallback=anzovinmod.Utilities.bind(this,this._flashLoadTimerFunction)}setTimeout(this._flashLoadBoundCallback,100);return}this._flashLoaded=true;for(var a=0;a<this._flashAttachScenes.length;++a){this._mainTimeline.setSceneInfo(this._flashAttachScenes[a])}this._flashAttachScenes=[];this._mainTimeline.setLogLevel(anzovinmod.Logging.getLogLevel());anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._flashLoadTimerFunction","flash has loaded and has function callbacks");this._flashLoadBoundCallback=null;this._mainTimeline.addStateChangeCallback("anzovinmod.Player.findPlayerInstance("+this._id+") ? anzovinmod.Player.findPlayerInstance("+this._id+")._mainTimelineStateChangeCallback(#) : anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,'_','flash callback cannot identify player with id "+this._id+"')");this._mainTimeline.addAnimationEventCallback("anzovinmod.Player.findPlayerInstance("+this._id+") ? anzovinmod.Player.findPlayerInstance("+this._id+")._handleTriggeredAnimationEvent(#) : anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,'_','flash callback cannot identify player with id "+this._id+"')");this._mainTimeline.addPlaybackPercentCallback("anzovinmod.Player.findPlayerInstance("+this._id+") ? anzovinmod.Player.findPlayerInstance("+this._id+").setPlaybackPercent(#) : anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,'_','flash callback cannot identify player with id "+this._id+"')");if(this._playerControls.hasOwnProperty("volume-slider")){if(this._playerControls["volume-slider"]!=null){this._mainTimeline.setVolume(this._playerControls["volume-slider"].children[0].value)}}this._mainTimeline.setReplacementContainer(this._replacementContainer);this._mainTimeline.setStates({bare:false,unloaded:true});this._mainTimeline.setStates({unloaded:false,loading:true});this._mainTimeline.setStates({loading:false,loaded:true});this.resize()};anzovinmod.Player.prototype._mainTimelineStateChangeCallback=function(m){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._mainTimelineStateChangeCallback","state change callback called by mtl: ",m);m=anzovinmod.Utilities.defaultParam(m,[],true);var g={};for(var f=0;f<m.length;++f){g[m[f]]=this._mainTimeline.isState(m[f])}var k;var h;for(var f=0;f<m.length;++f){switch(m[f]){case"manifestloading":case"loading":this._resizeLoginButtonOverlay();break;case"loaded":k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.addStringComponent(k,"mtl-loaded");if(k!=h){this._divWrapper.setAttribute("class",h)}this._sendAnimationLoadTimeEvent(new Date());break;case"started":k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.addStringComponent(k,"mtl-started");if(k!=h){this._divWrapper.setAttribute("class",h)}this.buildJumpBar();break;case"playing":if(g[m[f]]){k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.addStringComponent(k,"mtl-playing");this._allowHidingUIElements.playing=true}else{k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.removeStringComponent(k,"mtl-playing");this._allowHidingUIElements.playing=false}if(k!=h){this._divWrapper.setAttribute("class",h)}this._showControlsAndResetMovementTimeoutTimer();break;case"ended":if(g[m[f]]){k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.addStringComponent(k,"mtl-ended");this._allowHidingUIElements.ended=false}else{k=this._divWrapper.getAttribute("class");h=anzovinmod.Utilities.removeStringComponent(k,"mtl-ended");this._allowHidingUIElements.ended=true}if(k!=h){this._divWrapper.setAttribute("class",h)}this._showControlsAndResetMovementTimeoutTimer();if(this._lastPercentUpdateRealValue>=95){this.setPlaybackPercent(100)}break;case"willresize":if(this._mainTimeline.isState("willresize")){this.resize();this._mainTimeline.setStates({willresize:false,resize:false},false)}break;case"hardpaused":var b=this._mainTimeline.isState("hardpaused");var e=["pause","main-pause","main-pause-frame"];for(var d=0;d<e.length;++d){var a=null;if(this._playerControls.hasOwnProperty(e[d])){a=this._playerControls[e[d]]}if(a==null){continue}var l=anzovinmod.Utilities.getDomElementProperty(a,"_anzovinmod");k=a.getAttribute("class");h=k;if(b==l.state){continue}else{if(b){h=anzovinmod.Utilities.addStringComponent(k,"active")}else{h=anzovinmod.Utilities.removeStringComponent(k,"active")}}l.state=b;a.setAttribute("class",h)}break}}};anzovinmod.Player.prototype._playerMouseMoveHandler=function(a){if(this._uiControlsShown||!this._isMobile){this._showControlsAndResetMovementTimeoutTimer()}};anzovinmod.Player.prototype._playerMouseMoveTimeout=function(){this._hideControlsAndCleanupTimeoutTimer()};anzovinmod.Player.prototype._showControlsAndResetMovementTimeoutTimer=function(){if(this._lastMouseMovementTimer!=null){clearTimeout(this._lastMouseMovementTimer);this._lastMouseMovementTimer=null}if(!this._uiControlsShown){this._divPlayerControls.setAttribute("class",anzovinmod.Utilities.removeStringComponent(this._divPlayerControls.getAttribute("class"),"no-controls"));this._uiControlsShown=true}if(this._mainTimeline!=null){var b=true;b=b&&this._mainTimeline!=null;b=b&&(typeof this._mainTimeline.isState!=="undefined");b=b&&!this._mainTimeline.isState("hardpaused");for(var a in this._allowHidingUIElements){if(!this._allowHidingUIElements.hasOwnProperty(a)){continue}b=b&&this._allowHidingUIElements[a]}if(b){this._lastMouseMovementTimer=setTimeout(this._lastMouseMovementTimerFunction,this._lastMouseMovementTimerLength)}}};anzovinmod.Player.prototype._hideControlsAndCleanupTimeoutTimer=function(){if(this._uiControlsShown){var b=true;b=b&&(typeof this._mainTimeline.isState)!=="undefined";b=b&&!this._mainTimeline.isState("hardpaused");for(var a in this._allowHidingUIElements){if(!this._allowHidingUIElements.hasOwnProperty(a)){continue}b=b&&this._allowHidingUIElements[a]}if(b){this._divPlayerControls.setAttribute("class",anzovinmod.Utilities.addStringComponent(this._divPlayerControls.getAttribute("class"),"no-controls"));this._uiControlsShown=false}}if(this._lastMouseMovementTimer!=null){clearTimeout(this._lastMouseMovementTimer);this._lastMouseMovementTimer=null}};anzovinmod.Player.prototype._sendAnimationLoadTimeEvent=function(a){a=anzovinmod.Utilities.defaultParam(a,null);var b=null;if(a!=null){b=a.getTime()-this._animationStartLoadTime.getTime()}this._handleTriggeredAnimationEvent("LoadTimer",b)};anzovinmod.Player.prototype._handleTriggeredAnimationEvent=function(a,c){try{this._sendEventLog(a,c)}catch(b){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_ERROR,"anzovinmod.Player._handleTriggeredAnimationEvent","exception occurred while trying to send log event: ",b)}};anzovinmod.Player.prototype._sendEventLog=function(b,d){b=anzovinmod.Utilities.defaultParam(b,null);d=anzovinmod.Utilities.defaultParam(d,null);var a=new anzovinmod.AsyncRequestObject("POST",this._replacementContainer.get("EventLogURL"));a.setRequestHeader("APIKey",this._replacementContainer.get("ApiKey"));a.setRequestHeader("Content-Type","application/json");a.setRequestHeader("AuthHash",this._replacementContainer.get("AuthHash"));var c={EmployerId:this._replacementContainer.get("EmployerId"),EventId:0,EventName:b,ExperienceUserId:this._replacementContainer.get("ExperienceUserId"),LogComment:d,ContentId:null};switch(b){case"StartAnimation":c.EventId=4;break;case"EndAnimation":c.EventId=5;break;case"StartQuiz":c.EventId=6;break;case"EndQuiz":c.EventId=7;break;case"HelpfulYes":c.EventId=13;break;case"HelpfulNo":c.EventId=14;break;case"AuthenticationSuccess":c.EventId=15;break;case"ReplayAnimation":c.EventId=17;break;case"GoToCch":c.EventId=18;break;case"GoToPlan":c.EventId=19;break;case"Error":c.EventId=22;break;case"LoadTimer":c.EventId=24;break;default:c.EventId=22;c.EventName="Error";if(c.LogComment==null){c.LogComment=""}else{c.LogComment+=";"}c.LogComment+="no event named "+b;break}anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._sendEventLog","logging triggered animation event: ",b," ",d);anzovinmod.Logging.logo(anzovinmod.Logging.LOG_DEBUG,a);anzovinmod.Logging.logo(anzovinmod.Logging.LOG_DEBUG,c);a.send(JSON.stringify(c))};anzovinmod.Player.prototype._controlClickCallback=function(b){if(anzovinmod.Utilities.IsIE8()){b=window.event;var c=b.srcElement;if(c==null){return}if(c.getAttribute("class")=="rangeslider"){c=c.parentNode;if(c==null){return}}var a=anzovinmod.Utilities.getDomElementProperty(c,"_anzovinmod");if(a==null){return}this._controlClickHandle(c,a["control-name"])}else{if(b.target==null){return}if(!b.target.hasOwnProperty("_anzovinmod")){return}this._controlClickHandle(b.target,b.target._anzovinmod["control-name"])}};anzovinmod.Player.prototype._controlClickHandle=function(n,f){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClickHandle","click registered on control: ",f);n=anzovinmod.Utilities.defaultParam(n,null);f=anzovinmod.Utilities.defaultParam(f,null);if(n==null){return}if(f==null){return}if(!this._playerControls.hasOwnProperty(f)){if(f!="jumpnode"){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_WARN,"anzovinmod.Player._controlClickHandle","no owned control of name: ",f);return}}var d=this._playerControls[f];var l=false;if(d!=null){var l=!(anzovinmod.Utilities.getDomElementProperty(d,"_anzovinmod")["state"])}var h=[];var e=null;switch(f){case"volume":h=["volume"];break;case"pause":case"main-pause":case"main-pause-frame":if(this._mainTimeline.isState("playing")){h=["pause","main-pause","main-pause-frame"]}break;case"begin-play":case"main-begin-play":if(this._mainTimeline.isState("loaded")&&!this._mainTimeline.isState("playing")){h=["begin-play","main-begin-play"]}break}for(var g=0;g<h.length;++g){var b=h[g];switch(b){case"volume":case"pause":case"main-pause":case"main-pause-frame":if(!this._playerControls.hasOwnProperty(b)){continue}var k=this._playerControls[b];var m=anzovinmod.Utilities.getDomElementProperty(k,"_anzovinmod");m.state=l;if(m.state){k.setAttribute("class",anzovinmod.Utilities.addStringComponent(k.getAttribute("class"),"active"))}else{k.setAttribute("class",anzovinmod.Utilities.removeStringComponent(k.getAttribute("class"),"active"))}break}}switch(f){case"login":case"loading-login":var a=null;var c=this._mainTimeline.getLoginButtonConfig();if(c!=null&&c.hasOwnProperty("url")&&c.url!=null){a=c.url}if(a==null){a="http://www.clearcosthealth.com/"}this._handleTriggeredAnimationEvent("GoToCch",null);window.open(a,"_blank");break;case"volume":e="volume";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","volume [un-]muting");if(l){this._mainTimeline.setMute(true)}else{this._mainTimeline.setMute(false)}break;case"pause":case"main-pause":case"main-pause-frame":e="pause";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback [un-]pausing");if(this._mainTimeline.isState("playing")){this._mainTimeline.setState("hardpaused",l)}break;case"begin-play":case"main-begin-play":e="begin-play";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback starting");if(this._mainTimeline.isState("loaded")&&!this._mainTimeline.isState("playing")){if(this._playerControls.hasOwnProperty("volume-slider")){var j=anzovinmod.Utilities.getDomElementProperty(this._playerControls["volume-slider"],"_anzovinmod");if(j["rangeslider-instance"]){j["rangeslider-instance"].setValue(0.5,true);j["rangeslider-instance"].update()}}this._mainTimeline.startAnimation()}break;case"replay":e="replay";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback replaying");if(this._mainTimeline.isState("ended")){this._mainTimeline.replayAnimation()}break;case"nodenav-back":e="nodenav-back";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback jumping back a node");if(this._mainTimeline.isState("started")){this._mainTimeline.goNodeBack()}break;case"nodenav-forward":e="nodenav-forward";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback jumping forward a node");if(this._mainTimeline.isState("started")){this._mainTimeline.goNodeForward()}break;case"jumpnode":if(!this._isMobile){e="jumpnode";anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player._controlClick","playback jumping to a node");if(this._mainTimeline.isState("started")){var j=anzovinmod.Utilities.getDomElementProperty(n,"_anzovinmod");this._mainTimeline.goNodeTo(j["control-value"])}}break;case"back":e="back";break}this._showControlsAndResetMovementTimeoutTimer();if(e!=null){if(this._controlCallbacks.hasOwnProperty(e)){for(var g=0;g<this._controlCallbacks[e].length;++g){this._controlCallbacks[e][g](this,e)}}}};anzovinmod.Player.prototype.getMainTimeline=function(){return this._mainTimeline};anzovinmod.Player.prototype.resize=function(a,g){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.Player.resize","resizing player to (",a,",",g,")");a=anzovinmod.Utilities.defaultParam(a,this._calledWidth,true);g=anzovinmod.Utilities.defaultParam(g,this._calledHeight,true);var f=a;var d=g;a=(a!="canvas"?a:(this._mainTimeline._canvasWidth!=null?this._mainTimeline._canvasWidth:"100%"));g=(g!="canvas"?g:(this._mainTimeline._canvasHeight!=null?this._mainTimeline._canvasHeight:"100%"));var e=anzovinmod.Utilities.simplifyPotentialResizeValues(this._parent,a,g);var c=1;var i=null;if(this._mainTimeline!=null){if(typeof this._mainTimeline.getCanvasSize!=="undefined"){i=this._mainTimeline.getCanvasSize();if(i!=null){if(i.width!=null&&i.height!=null){c=anzovinmod.Utilities.calculateBoundScale(e.width,e.height,i.width,i.height,this._mainTimeline.getResizeBehaviors())}}}}var h=e.width;var b=e.height;if(i!=null){if(i.width!=null&&i.height!=null){h=i.width*c;b=i.height*c}}this._setResize(f,d,h,b,c)};anzovinmod.Player.prototype._setResize=function(g,i,h,f,e){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_DEBUG,"anzovinmod.Player._setResize","called(",g,",",i,") display(",h,",",f,") scale(",e,")");g=anzovinmod.Utilities.defaultParam(g,null);i=anzovinmod.Utilities.defaultParam(i,null);h=anzovinmod.Utilities.defaultParam(h,null);f=anzovinmod.Utilities.defaultParam(f,null);e=anzovinmod.Utilities.defaultParam(e,null);if(g==null||i==null){return}this._calledWidth=g;this._calledHeight=i;if(h==null||f==null||e==null){return}this._currentWidth=h;this._currentHeight=f;this._divWrapper.style.width=h+"px";this._divWrapper.style.height=f+"px";if(this._mainTimeline!=null){if(!this._isFlash){this._mainTimeline.setSize(g,i,h,f,e)}else{this._mainTimeline.setAttribute("width",h+"px");this._mainTimeline.setAttribute("height",f+"px")}}var a="size-";if(h>1400){a+="m"}else{a+="s"}if(this._currentCssSize==null||this._currentCssSize!=a){var r=this._divWrapper.getAttribute("class");var n=r;if(this._currentCssSize!=null){n=anzovinmod.Utilities.removeStringComponent(n,this._currentCssSize)}n=anzovinmod.Utilities.addStringComponent(n,a);if(r!=n){this._divWrapper.setAttribute("class",n)}this._currentCssSize=a}this._resizeLoginButtonOverlay();if(this._playerControls.hasOwnProperty("volume-slider")){var p=this._playerControls["volume-slider"];var k=anzovinmod.Utilities.getDomElementProperty(p,"_anzovinmod");if(k!=null&&k.hasOwnProperty("rangeslider-input")){if(k["rangeslider-instance"]){k["rangeslider-instance"].update()}}}var t=null;if(this._playerControls.hasOwnProperty("loading")){t=this._playerControls.loading}if(t!=null){var j=t.children[0];var s=j.src;var b="../images/loading-"+a+".gif";if(s!=b){j.src=b}}if(this._posterImage!=null){this._posterImage.style.width=h+"px";this._posterImage.style.height=f+"px"}var l=anzovinmod.Utilities.getWindowSize();var m={top:0,bottom:0};var d={top:0,bottom:0};if(l.height>f){switch(a){case"size-l":d.top=80;d.bottom=100;break;case"size-m":d.top=80;d.bottom=70;break;case"size-s":d.top=60;if(this._isMobile){d.bottom=60}else{d.bottom=48}break}var o=d.top+d.bottom;var q=l.height-f;if(q>=o){m.top=d.top;m.bottom=d.bottom;this._allowHidingUIElements.extraheight=false;this._showControlsAndResetMovementTimeoutTimer()}else{this._allowHidingUIElements.extraheight=true;this._showControlsAndResetMovementTimeoutTimer()}}else{this._allowHidingUIElements.extraheight=true;this._showControlsAndResetMovementTimeoutTimer()}if(!this._isFlash){this._mainTimeline.getDivWrapper().style.top=m.top+"px"}else{if(this._mainTimeline!=null){this._mainTimeline.parentNode.style.top=m.top+"px"}}this._divWrapper.style.height=(f+m.top+m.bottom)+"px"};anzovinmod.Player.prototype.buildJumpBar=function(){var s=this._mainTimeline.getProgressNodes();if(s==null||s.length==0){return false}var d=[];for(var t in s){if(!s.hasOwnProperty(t)){continue}var z=s[t];if(!z.hasOwnProperty("position")){continue}if(z.position==null){continue}var l=false;for(var v=0;v<d.length;++v){var c=d[v];if(c.position>=z.position){continue}d.push(z);var x=d.length-1;for(var u=v;u<x;++u){var r=d[u];d[u]=d[x];d[x]=r}l=true;break}if(!l){d.push(z)}}s=d;anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.Player.buildJumpBar","ordered nodes: ",s);var n=document.createElement("div");n.setAttribute("class","control jumpcontrols");this._playerControls.jumpbar=n;var A=document.createElement("div");A.setAttribute("class","jumpcontrols-wrapped");n.appendChild(A);var b=document.createElement("div");b.setAttribute("class","path-left");A.appendChild(b);var o=document.createElement("div");o.setAttribute("class","path-center");A.appendChild(o);var e=document.createElement("div");e.setAttribute("class","path-right");A.appendChild(e);var b=document.createElement("div");b.setAttribute("class","overpath-left");A.appendChild(b);var o=document.createElement("div");o.setAttribute("class","overpath-center");A.appendChild(o);var e=document.createElement("div");e.setAttribute("class","overpath-right");A.appendChild(e);this._playerControls["jumpbar-overlaypath-center"]=o;this._playerControls["jumpbar-overlaypath-right"]=e;var q=0;var g=document.createElement("div");g.setAttribute("class","button-wrapper");A.appendChild(g);var w=document.createElement("div");w.setAttribute("class","buttons");g.appendChild(w);for(var v=0;v<s.length;++v){var z=s[v];if(!z.hasOwnProperty("position")){continue}if(z.position==null){continue}var a=document.createElement("div");var m={state:false,"control-name":"jumpnode","control-value":z.name};a.setAttribute("class","button");a.style.left=z.position+"%";anzovinmod.Utilities.setDomElementProperty(a,"_anzovinmod",m);a.setAttribute("position",z.position);a.setAttribute("isactive",0);var B=document.createElement("div");B.setAttribute("class","button-circle");a.appendChild(B);var h=document.createElement("div");h.setAttribute("class","button-click-area");var y=anzovinmod.Utilities.bind(this,this._controlClickCallback);h.onclick=y;anzovinmod.Utilities.setDomElementProperty(h,"_anzovinmod",m);a.appendChild(h);w.appendChild(a);++q}this._playerControls["jumpbar-buttons"]=w;if(q==0){return false}for(var v=0;v<this._divPlayerControls.children.length;++v){var p=this._divPlayerControls.children[v];if(anzovinmod.Utilities.hasStringComponent(p.getAttribute("class"),"controls-bottom")){p.appendChild(n);return true}}return false};anzovinmod.Player.prototype.attachScene=function(b){if(!this._isFlash){this._mainTimeline.attachScene(b)}else{var a=anzovinmod.instance.Scenes[b]["properties"];if(a!=null){if(this._flashLoaded){this._mainTimeline.setSceneInfo(a)}else{this._flashAttachScenes.push(a)}}}};anzovinmod.Player.prototype.startStage=function(){if(!this._isFlash){this._mainTimeline.startStage()}else{this._initFlashMainTimeline()}};anzovinmod.Player.prototype.setPlaybackPercent=function(g){g=anzovinmod.Utilities.defaultParam(g,null);if(g==null){return}var b=new Date().getTime();var j=!(this._lastPercentUpdateInterval>0);if(g<=0){g=0;j=true}else{if(g>=100){g=100;j=true}}if(!j){if(this._lastPercentUpdateInterval==0||this._lastPercentUpdateTime==null||b-this._lastPercentUpdateTime>=this._lastPercentUpdateInterval){j=true}if(!j){if(this._playerControls.hasOwnProperty("jumpbar-buttons")){var a=this._playerControls["jumpbar-buttons"];for(var e=0;e<a.children.length;++e){var d=a.children[e];if(this._lastPercentUpdateValue<d.getAttribute("position")&&d.getAttribute("position")<=g){j=true;break}}}}}this._lastPercentUpdateRealValue=g;if(!j){return}if(this._lastPercentUpdateInterval>0){this._lastPercentUpdateTime=b;this._lastPercentUpdateValue=g}if(this._playerControls.hasOwnProperty("jumpbar-overlaypath-center")){var k=this._playerControls["jumpbar-overlaypath-center"];if(k.style.width!=g+"%"){k.style.width=g+"%"}}if(this._playerControls.hasOwnProperty("jumpbar-overlaypath-right")){var k=this._playerControls["jumpbar-overlaypath-right"];if(k.style.left!=g+"%"){k.style.left=g+"%"}}if(this._playerControls.hasOwnProperty("jumpbar-buttons")){var a=this._playerControls["jumpbar-buttons"];for(var e=0;e<a.children.length;++e){var d=a.children[e];if(d.getAttribute("position")>g){if(d.getAttribute("isactive")==1){var h=d.getAttribute("class");var f=anzovinmod.Utilities.removeStringComponent(h,"active");if(h!=f){d.setAttribute("class",f)}d.setAttribute("isactive",0)}}else{if(d.getAttribute("isactive")==0){var h=d.getAttribute("class");var f=anzovinmod.Utilities.addStringComponent(h,"active");if(h!=f){d.setAttribute("class",f)}d.setAttribute("isactive",1)}}}}};anzovinmod.Player.prototype._resizeLoginButtonOverlay=function(){if(this._currentWidth==null||this._currentHeight==null){return}if(!this._playerControls.hasOwnProperty("loading-login")){return}var c=this._playerControls["loading-login"];var f=null;if(this._mainTimeline!=null){f=this._mainTimeline.getLoginButtonConfig()}var e=1;var d=1;var g=0;var b=0;var a=0;var h=0;if(f!=null){e=this._currentWidth/f.imageSizeWidth;d=this._currentHeight/f.imageSizeHeight;g=f.width;b=f.height;a=f.x;h=f.y}c.style.width=(e*g)+"px";c.style.height=(d*b)+"px";c.style.left=(e*a)+"px";c.style.top=(d*h)+"px"};anzovinmod.Player.findPlayerInstance=function(c){for(var a=0;a<anzovinmod.Player.uniqueIds.length;++a){var b=anzovinmod.Player.uniqueIds[a];if(b.id==c){return b.player}}return null};anzovinmod.Player.uniqueIds=[]}());
/*! ReplacementVariableContainer.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.ReplacementVariableContainer=function(){this._adds={};this._defs={}};anzovinmod.ReplacementVariableContainer.prototype.add=function(c,b,a){c=anzovinmod.Utilities.defaultParam(c,null);b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);if(c==null){return}if(a!=b){this._adds[c]=b}};anzovinmod.ReplacementVariableContainer.prototype.def=function(b,a){b=anzovinmod.Utilities.defaultParam(b,null);a=anzovinmod.Utilities.defaultParam(a,null);if(b==null){return}this._defs[b]=a};anzovinmod.ReplacementVariableContainer.prototype.has=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return false}return this.hasAdd(a)||this.hasDef(a)};anzovinmod.ReplacementVariableContainer.prototype.hasAdd=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return false}return this._adds.hasOwnProperty(a)};anzovinmod.ReplacementVariableContainer.prototype.hasDef=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return false}return this._defs.hasOwnProperty(a)};anzovinmod.ReplacementVariableContainer.prototype.get=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}if(this.hasAdd(a)){return this._adds[a]}if(this.hasDef(a)){return this._defs[a]}return null};anzovinmod.ReplacementVariableContainer.prototype.getAdd=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}if(this.hasAdd(a)){return this._adds[a]}return null};anzovinmod.ReplacementVariableContainer.prototype.getDef=function(a){a=anzovinmod.Utilities.defaultParam(a,null);if(a==null){return}if(this.hasDef(a)){return this._defs[a]}return null};anzovinmod.ReplacementVariableContainer.prototype.addWindowHash=function(c){var a=this._parseWindowHash(c);for(var b=0;b<a.length;++b){this._adds[a[b][0]]=a[b][1]}};anzovinmod.ReplacementVariableContainer.prototype.defWindowHash=function(c){var a=this._parseWindowHash(c);for(var b=0;b<a.length;++b){this._defs[a[b][0]]=a[b][1]}};anzovinmod.ReplacementVariableContainer.prototype._parseWindowHash=function(g){g=anzovinmod.Utilities.defaultParam(g,null);var e=[];if(g==null||g==""||g=="#"){return e}var b=g.substr(1);var d=b.split("&");for(var f=0;f<d.length;++f){var a=d[f].split("=");if(a.length>=2){var h=a.shift();var c=a.join("=");e.push([decodeURIComponent(h),decodeURIComponent(c)])}}for(var f=0;f<e.length;++f){anzovinmod.Logging.logm(anzovinmod.Logging.LOG_INFO,"anzovinmod.ReplacementVariableContainer._parseWindowHash",e[f][0],e[f][1])}return e}}());
/*! LateEaselLoader.js */
;var anzovinmod=anzovinmod||{};(function(){anzovinmod.LateEaselLoader=function(){throw"cannot instantiate anzovinmod.LateEaselLoader"};anzovinmod.LateEaselLoader._steps=[];anzovinmod.LateEaselLoader._delayTimeout=null;anzovinmod.LateEaselLoader._stepsPerDelay=50;anzovinmod.LateEaselLoader._newSteps=false;anzovinmod.LateEaselLoader.getIndex=function(d,a){for(var b=0,c=anzovinmod.LateEaselLoader._steps.length;b<c;++b){if(anzovinmod.LateEaselLoader._steps[b][0]===d){return b}}anzovinmod.LateEaselLoader._steps.push([d,0,[]]);return anzovinmod.LateEaselLoader._steps.length-1};anzovinmod.LateEaselLoader.add=function(c,d){anzovinmod.LateEaselLoader._newSteps=true;for(var a=0,b=anzovinmod.LateEaselLoader._steps.length;a<b;++a){if(anzovinmod.LateEaselLoader._steps[a][0]===c){anzovinmod.LateEaselLoader._steps[a][2].push(d);return}}anzovinmod.LateEaselLoader._steps.push([c,0,[d]])};anzovinmod.LateEaselLoader.addIndex=function(a,b){anzovinmod.LateEaselLoader._newSteps=true;anzovinmod.LateEaselLoader._steps[a][2].push(b)};anzovinmod.LateEaselLoader._do=function(d){var c=0;mainloop:do{anzovinmod.LateEaselLoader._newSteps=false;for(var b=0;b<anzovinmod.LateEaselLoader._steps.length;++b){if(anzovinmod.LateEaselLoader._steps[b][0]===null){continue}for(var a=anzovinmod.LateEaselLoader._steps[b][1];a<anzovinmod.LateEaselLoader._steps[b][2].length;++a){if(d){if(c>=anzovinmod.LateEaselLoader._stepsPerDelay){break mainloop}c+=1}anzovinmod.LateEaselLoader._steps[b][1]+=1;anzovinmod.LateEaselLoader._steps[b][2][a].apply(anzovinmod.LateEaselLoader._steps[b][0]);anzovinmod.LateEaselLoader._steps[b][2][a]=null;if(anzovinmod.LateEaselLoader._newSteps){continue mainloop}}anzovinmod.LateEaselLoader._steps[b]=[null,0,[]];anzovinmod.LateEaselLoader._steps.splice(b,1);--b}for(var b=0;b<anzovinmod.LateEaselLoader._steps.length;++b){if(anzovinmod.LateEaselLoader._steps[b][0]!==null){continue}for(var a=anzovinmod.LateEaselLoader._steps[b][1];a<anzovinmod.LateEaselLoader._steps[b][2].length;++a){if(d){if(c>=anzovinmod.LateEaselLoader._stepsPerDelay){break mainloop}c+=1}anzovinmod.LateEaselLoader._steps[b][1]+=1;anzovinmod.LateEaselLoader._steps[b][2][a]();anzovinmod.LateEaselLoader._steps[b][2][a]=null;if(anzovinmod.LateEaselLoader._newSteps){continue mainloop}}anzovinmod.LateEaselLoader._steps[b]=[null,0,[]];anzovinmod.LateEaselLoader._steps.splice(b,1);--b}break mainloop}while(true)};anzovinmod.LateEaselLoader.doAll=function(){if(anzovinmod.LateEaselLoader._delayTimeout!=null){clearTimeout(anzovinmod.LateEaselLoader._delayTimeout);anzovinmod.LateEaselLoader._delayTimeout=null}anzovinmod.LateEaselLoader._do(false)};anzovinmod.LateEaselLoader.delayDoAll=function(){if(anzovinmod.LateEaselLoader._delayTimeout==null){anzovinmod.LateEaselLoader._delayTimeout=setTimeout(anzovinmod.LateEaselLoader._delayTimeoutCallback,1)}};anzovinmod.LateEaselLoader._delayTimeoutCallback=function(){anzovinmod.LateEaselLoader._delayTimeout=null;anzovinmod.LateEaselLoader._do(true);if(anzovinmod.LateEaselLoader._steps.length>0){anzovinmod.LateEaselLoader._delayTimeout=setTimeout(anzovinmod.LateEaselLoader._delayTimeoutCallback,1)}}}());